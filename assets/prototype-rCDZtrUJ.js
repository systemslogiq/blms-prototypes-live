import{c as N,u as w,j as e,X as $,r as p}from"./index-C0uo4jL5.js";import{b as P,c as U,a as H,S as R,M as W,B as J,F as L,g as Q}from"./mockData-C0NYPHwj.js";import{D as Y}from"./database-921fO-Hn.js";import{L as G,C as X,W as K,S as q,b as Z,U as ee,a as T,P as I,M as te}from"./wifi-off-D1FOAdc_.js";import{S as se}from"./settings-BHAvjovR.js";import{T as ae,L as le,R as re,C as ie}from"./text-align-justify-DbCESrr0.js";import{C as ne}from"./circle-check-Bfke-buQ.js";const oe=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],ce=N("arrow-down",oe);const de=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],E=N("arrow-up",de);const xe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],me=N("circle",xe);const he=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],ue=N("file-spreadsheet",he);const pe=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],be=N("flask-conical",pe);const ge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],fe=N("globe",ge);const je=[["path",{d:"M5 12h14",key:"1ays0h"}]],ke=N("minus",je);const Ne=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],we=N("save",Ne);const ve=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ye=N("square-check-big",ve),Ce=({id:i,label:r,icon:c,active:n,onClick:d,collapsed:t})=>{const l=c;return e.jsxs("button",{onClick:()=>d(i),className:`w-full flex items-center px-3 py-2.5 mb-1 rounded-lg transition-colors ${n?"bg-blue-600 text-white shadow-sm":"text-slate-300 hover:bg-slate-800 hover:text-white"}`,title:t?r:"",children:[e.jsx(l,{className:`h-5 w-5 ${t?"mx-auto":"mr-3"}`}),!t&&e.jsx("span",{className:"text-sm font-medium truncate",children:r})]})};function Se({activeModule:i,onModuleChange:r,isOpen:c,onClose:n,isOffline:d}){const{t}=w(),l=[{id:"shiftbook",label:t("modules.shiftBook"),icon:P},{id:"manual-entry",label:t("modules.manualEntry"),icon:be},{id:"parameters",label:t("modules.parameterMaster"),icon:Y},{id:"filter-studio",label:t("modules.filterStudio"),icon:U},{id:"dashboards",label:t("modules.dashboards"),icon:G},{id:"reports",label:t("modules.reporting"),icon:ue},{id:"campaigns",label:t("modules.campaigns"),icon:X},{id:"admin",label:t("modules.administration"),icon:se}];return e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 lg:hidden",onClick:n}),e.jsxs("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-50
          w-64 bg-slate-900 text-slate-50 border-r border-slate-800
          transform transition-transform duration-200 ease-in-out
          ${c?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          flex flex-col
        `,children:[e.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-400",children:[e.jsx("div",{className:"h-8 w-8 rounded bg-blue-600 flex items-center justify-center text-white font-bold",children:"B"}),e.jsx("span",{className:"font-bold text-xl tracking-tight text-white",children:t("header.blms")})]}),e.jsx("button",{onClick:n,className:"ml-auto lg:hidden text-slate-400 hover:text-white",children:e.jsx($,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto py-4 px-3",children:e.jsx("div",{className:"space-y-1",children:l.map(m=>e.jsx(Ce,{...m,active:i===m.id,onClick:s=>{r(s),window.innerWidth<1024&&n()}},m.id))})}),d&&e.jsx("div",{className:"p-4 bg-amber-500/10 border-t border-amber-500/20 text-amber-500",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{className:"h-5 w-5"}),e.jsxs("div",{className:"text-xs font-medium",children:[e.jsx("p",{children:"You are offline"}),e.jsx("p",{className:"opacity-80",children:"Changes saved locally"})]})]})}),e.jsx("div",{className:"p-4 border-t border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-slate-700 flex items-center justify-center text-sm font-medium",children:"SJ"}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:"Sarah Jenkins"}),e.jsx("p",{className:"text-xs text-slate-400 truncate",children:"Supervisor"})]})]})})]})]})}function Me({onMenuClick:i,theme:r,onThemeToggle:c,notifications:n=3}){const{t:d,i18n:t}=w(),l=()=>{const s=(t.language||"en").startsWith("en")?"de":"en";t.changeLanguage(s)};return e.jsxs("header",{className:"h-16 bg-white dark:bg-slate-950 border-b border-slate-200 dark:border-slate-800 flex items-center px-4 lg:px-6 justify-between flex-shrink-0 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:i,className:"p-2 -ml-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 lg:hidden",children:e.jsx(H,{className:"h-6 w-6"})}),e.jsx("h1",{className:"text-lg font-semibold text-slate-900 dark:text-white hidden sm:block",children:d("header.title")})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsxs("button",{onClick:l,className:"p-2 rounded-full text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800 transition-colors flex items-center gap-1",title:"Switch Language",children:[e.jsx(fe,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs font-bold uppercase",children:t.language?.split("-")[0]||"en"})]}),e.jsx("button",{className:"p-2 rounded-full text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800 transition-colors",children:e.jsx(q,{className:"h-5 w-5"})}),e.jsx("button",{onClick:c,className:"p-2 rounded-full text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800 transition-colors",title:d(r==="dark"?"common.theme.light":"common.theme.dark"),children:r==="dark"?e.jsx(R,{className:"h-5 w-5"}):e.jsx(W,{className:"h-5 w-5"})}),e.jsxs("button",{className:"relative p-2 rounded-full text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800 transition-colors",children:[e.jsx(J,{className:"h-5 w-5"}),n>0&&e.jsx("span",{className:"absolute top-1.5 right-1.5 h-2 w-2 rounded-full bg-red-500 ring-2 ring-white dark:ring-slate-950"})]})]})]})}function $e({onSearch:i,onFilterChange:r,onCreateClick:c,filters:n,areas:d=[],onClearFilters:t,density:l,onDensityChange:m}){const{t:s}=w(),a=Object.values(n).filter(Boolean).length;return e.jsx("div",{className:"bg-white dark:bg-slate-950 border-b border-slate-200 dark:border-slate-800 p-4 space-y-4 sticky top-0 z-10 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:[e.jsxs("div",{className:"flex flex-1 gap-3 overflow-x-auto pb-2 sm:pb-0 w-full sm:w-auto no-scrollbar",children:[e.jsxs("div",{className:"relative min-w-[180px]",children:[e.jsx(q,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:s("header.searchPlaceholder"),className:"w-full pl-9 pr-4 py-2 h-10 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white transition-all",onChange:x=>i(x.target.value)})]}),e.jsxs("select",{className:"h-10 px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white min-w-[140px]",onChange:x=>r("area",x.target.value),value:n.area||"",children:[e.jsxs("option",{value:"",children:[s("filters.area"),": ",s("common.all")||"All"]}),Object.values(d).map(x=>e.jsx("option",{value:x.id,children:x.name},x.id))]}),e.jsxs("select",{className:"h-10 px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white min-w-[120px]",onChange:x=>r("status",x.target.value),value:n.status||"",children:[e.jsxs("option",{value:"",children:[s("filters.status"),": ",s("common.all")||"All"]}),e.jsx("option",{value:"Open",children:s("entries.open")}),e.jsx("option",{value:"In Progress",children:s("entries.in_progress")}),e.jsx("option",{value:"Completed",children:s("entries.completed")}),e.jsx("option",{value:"Cancelled",children:s("entries.cancelled")})]}),a>0&&e.jsxs("button",{onClick:t,className:"h-10 px-3 flex items-center gap-2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 text-sm font-medium transition-colors whitespace-nowrap",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden xl:inline",children:s("common.clear")})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 w-full sm:w-auto justify-end",children:[e.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-800 rounded-lg p-1 mr-2",children:[e.jsx("button",{onClick:()=>m("compact"),className:`p-1.5 rounded ${l==="compact"?"bg-white dark:bg-slate-700 shadow-sm text-blue-600 dark:text-blue-400":"text-slate-500 hover:text-slate-700"}`,title:s("density.compact"),children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>m("comfortable"),className:`p-1.5 rounded ${l==="comfortable"?"bg-white dark:bg-slate-700 shadow-sm text-blue-600 dark:text-blue-400":"text-slate-500 hover:text-slate-700"}`,title:s("density.comfortable"),children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>m("spacious"),className:`p-1.5 rounded ${l==="spacious"?"bg-white dark:bg-slate-700 shadow-sm text-blue-600 dark:text-blue-400":"text-slate-500 hover:text-slate-700"}`,title:s("density.spacious"),children:e.jsx(re,{className:"h-4 w-4"})})]}),e.jsxs("button",{onClick:c,className:"h-10 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium flex items-center gap-2 shadow-sm transition-colors",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{children:s("entries.newButton")})]})]})]})})}const z=({status:i})=>{const{t:r}=w(),c=i?.toLowerCase().replace(" ","_")||"open",n={open:{label:r("entries.open"),color:"bg-blue-100 text-blue-700 dark:bg-blue-500/20 dark:text-blue-300",icon:me},in_progress:{label:r("entries.in_progress"),color:"bg-amber-100 text-amber-700 dark:bg-amber-500/20 dark:text-amber-300",icon:T},completed:{label:r("entries.completed"),color:"bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-300",icon:ne},cancelled:{label:r("entries.cancelled"),color:"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300",icon:ie}},{label:d,color:t,icon:l}=n[c]||n.open;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t}`,children:[e.jsx(l,{className:"w-3.5 h-3.5 mr-1.5"}),d]})},A=({priority:i})=>{const{t:r}=w(),c=i?.toLowerCase()||"normal";return c==="high"?e.jsx(E,{className:"w-4 h-4 text-red-500",title:r("entries.high")}):c==="medium"?e.jsx(E,{className:"w-4 h-4 text-amber-500",title:r("entries.medium")}):c==="low"?e.jsx(ce,{className:"w-4 h-4 text-slate-400",title:r("entries.low")}):e.jsx(ke,{className:"w-4 h-4 text-slate-300",title:r("entries.normal")})},B=(i,r)=>new Date(i).toLocaleString(r,{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});function _e({entries:i,onEntryClick:r,density:c="comfortable",users:n={},areas:d={},equipment:t={}}){const{t:l,i18n:m}=w();if(!i||i.length===0)return e.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-slate-500 dark:text-slate-400 bg-white dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-800 m-4",children:e.jsx("p",{className:"text-lg font-medium",children:l("entries.noEntriesFound")})});const s={compact:"py-2",comfortable:"py-3",spacious:"py-5"}[c];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden flex flex-col gap-3 p-4 bg-slate-50 dark:bg-slate-950",children:i.map(a=>{const x=d[a.areaId]?.name||a.areaId||"Unknown",b=n[a.createdById]?.name||a.createdById||"Unknown";return e.jsxs("div",{onClick:()=>r(a),className:"bg-white dark:bg-slate-900 rounded-lg p-4 border border-slate-200 dark:border-slate-800 shadow-sm active:bg-slate-50 dark:active:bg-slate-800 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(z,{status:a.status}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{priority:a.priority}),e.jsx("span",{className:"text-xs text-slate-400",children:B(a.createdAt,m.language).split(",")[1]?.trim()||new Date(a.createdAt).toLocaleTimeString(m.language,{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsx("h3",{className:"font-medium text-sm text-slate-900 dark:text-slate-100 mb-1 line-clamp-1",children:a.title}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 line-clamp-2 mb-3",children:[l(`entries.${a.type?.toLowerCase()}`,{defaultValue:a.type})," â€¢ ",a.description]}),e.jsxs("div",{className:"pt-3 border-t border-slate-100 dark:border-slate-800 flex justify-between text-xs text-slate-400",children:[e.jsx("span",{children:x}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"h-3 w-3"}),b]})]})]},a.id)})}),e.jsx("div",{className:"hidden md:block overflow-x-auto bg-white dark:bg-slate-900 rounded-lg shadow border border-slate-200 dark:border-slate-800 mx-4 mb-4",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-950",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider w-32",children:l("entries.status")}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider w-20",children:l("entries.priority")}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:l("entries.title")}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider hidden md:table-cell",children:l("entries.equipment")}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider hidden sm:table-cell",children:l("entries.area")}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider hidden lg:table-cell",children:l("filters.createdBy")}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider hidden xl:table-cell",children:l("common.create")})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-800 bg-white dark:bg-slate-900",children:i.map(a=>{const x=d[a.areaId]?.name||a.areaId||"Unknown",b=n[a.createdById]?.name||a.createdById||"Unknown",g=t[a.equipmentId],h=g?.kapNumber||a.equipmentId||"N/A";return e.jsxs("tr",{onClick:()=>r(a),className:"hover:bg-slate-50 dark:hover:bg-slate-800 cursor-pointer transition-colors group",children:[e.jsx("td",{className:`px-4 ${s} whitespace-nowrap`,children:e.jsx(z,{status:a.status})}),e.jsx("td",{className:`px-4 ${s} whitespace-nowrap pl-8`,children:e.jsx(A,{priority:a.priority})}),e.jsxs("td",{className:`px-4 ${s} max-w-md`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-slate-100 truncate block",children:a.title}),a.attachments?.length>0&&e.jsxs("span",{className:"text-xs text-slate-400 flex-shrink-0",title:`${a.attachments.length} ${l("entries.attachments")}`,children:["ðŸ“Ž ",a.attachments.length]})]}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-500 truncate max-w-xs capitalize",children:[l(`entries.${a.type?.toLowerCase()}`,{defaultValue:a.type})," â€¢ ",a.description]})]}),e.jsx("td",{className:`px-4 ${s} text-sm text-slate-700 dark:text-slate-300 hidden md:table-cell`,children:a.equipmentId?e.jsxs("div",{children:[e.jsx("div",{className:"font-mono text-xs text-slate-900 dark:text-slate-200",children:h}),g&&e.jsx("div",{className:"text-[10px] text-slate-500 truncate max-w-[120px]",children:g.label})]}):e.jsx("span",{className:"text-slate-400 italic",children:"N/A"})}),e.jsx("td",{className:`px-4 ${s} text-sm text-slate-700 dark:text-slate-300 hidden sm:table-cell`,children:x}),e.jsx("td",{className:`px-4 ${s} text-sm text-slate-700 dark:text-slate-300 hidden lg:table-cell`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-[10px] font-medium text-slate-600 dark:text-slate-300",children:b.charAt(0)}),b]})}),e.jsx("td",{className:`px-4 ${s} text-sm text-slate-500 dark:text-slate-400 hidden xl:table-cell whitespace-nowrap`,children:B(a.createdAt,m.language)})]},a.id)})})]})})]})}const v=({id:i,label:r,icon:c,active:n,onClick:d})=>e.jsxs("button",{onClick:()=>d(i),className:`
      flex items-center gap-2 px-3 py-3 text-sm font-medium border-b-2 transition-colors flex-shrink-0
      ${n?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:border-slate-300"}
    `,children:[e.jsx(c,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:r})]});function Le({entry:i,onClose:r,onSave:c,onEdit:n,isEditing:d=!0}){const{t}=w(),[l,m]=p.useState("details"),[s,a]=p.useState(i||{});if(!i)return null;const x=i.id==="new",b=d,g=(h,j)=>{a(y=>({...y,[h]:j}))};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:r}),e.jsxs("div",{className:"relative w-full h-full sm:h-auto max-w-4xl bg-white dark:bg-slate-900 sm:rounded-xl shadow-2xl flex flex-col max-h-full overflow-hidden sm:my-6",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 py-4 border-b border-slate-200 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50 flex-shrink-0 sticky top-0 z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:x?t("entries.new"):s.title||"Untitled Entry"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2",children:x?"Draft":`#${i.id} â€¢ ${i.status}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[b&&e.jsxs("button",{onClick:()=>c(s),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg flex items-center gap-2 shadow-sm transition-colors",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:t("common.save")})]}),e.jsx("button",{onClick:r,className:"p-2 text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",title:t("common.close"),children:e.jsx($,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex px-6 border-b border-slate-200 dark:border-slate-800 overflow-x-auto flex-shrink-0",children:[e.jsx(v,{id:"details",label:t("entries.details"),icon:L,active:l==="details",onClick:m}),e.jsx(v,{id:"attachments",label:t("entries.attachments"),icon:I,active:l==="attachments",onClick:m}),e.jsx(v,{id:"checklist",label:t("entries.checklist"),icon:ye,active:l==="checklist",onClick:m}),e.jsx(v,{id:"comments",label:t("entries.comments"),icon:te,active:l==="comments",onClick:m}),e.jsx(v,{id:"history",label:t("entries.history"),icon:T,active:l==="history",onClick:m})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l==="details"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:t("entries.title")}),b?e.jsx("input",{type:"text",value:s.title||"",onChange:h=>g("title",h.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none dark:text-white transition-all",placeholder:t("entries.title")}):e.jsx("p",{className:"text-slate-900 dark:text-white text-lg",children:s.title})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:t("entries.type")}),b?e.jsxs("select",{value:s.type?.toLowerCase()||"record",onChange:h=>g("type",h.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg outline-none dark:text-white transition-all capitalize",children:[e.jsx("option",{value:"instruction",children:t("entries.instruction")}),e.jsx("option",{value:"record",children:t("entries.record")}),e.jsx("option",{value:"suggestion",children:t("entries.suggestion")})]}):e.jsx("p",{className:"text-slate-900 dark:text-white capitalize",children:t(`entries.${s.type?.toLowerCase()}`,{defaultValue:s.type})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:t("entries.priority")}),b?e.jsxs("select",{value:s.priority?.toLowerCase()||"normal",onChange:h=>g("priority",h.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg outline-none dark:text-white transition-all capitalize",children:[e.jsx("option",{value:"low",children:t("entries.low")}),e.jsx("option",{value:"normal",children:t("entries.normal")}),e.jsx("option",{value:"medium",children:t("entries.medium")}),e.jsx("option",{value:"high",children:t("entries.high")}),e.jsxs("option",{value:"critical",children:[t("entries.high")," (+)"]})]}):e.jsx("p",{className:"text-slate-900 dark:text-white capitalize",children:t(`entries.${s.priority?.toLowerCase()}`,{defaultValue:s.priority})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:t("entries.description")}),b?e.jsx("textarea",{value:s.description||"",onChange:h=>g("description",h.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none min-h-[150px] dark:text-white transition-all",placeholder:t("entries.description")}):e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none text-slate-900 dark:text-slate-100 whitespace-pre-wrap",children:s.description})]})]}),l==="attachments"&&e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-slate-200 dark:border-slate-800 rounded-xl",children:[e.jsx(I,{className:"mx-auto h-12 w-12 text-slate-300"}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:t("entries.attachments")}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["(",t("common.notImplemented"),")"]}),s.attachments?.length>0&&e.jsxs("div",{className:"mt-6 text-left max-w-sm mx-auto",children:[e.jsx("h4",{className:"text-xs font-semibold uppercase text-slate-400 mb-2",children:t("entries.attachments")}),e.jsx("ul",{className:"space-y-2",children:s.attachments.map((h,j)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm bg-slate-50 dark:bg-slate-800 p-2 rounded",children:[e.jsx(L,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"truncate flex-1",children:h.filename})]},j))})]})]}),(l==="checklist"||l==="comments"||l==="history")&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-slate-500",children:[e.jsx("p",{className:"mb-2",children:t("common.comingSoon")}),e.jsx("p",{className:"text-xs text-slate-400",children:t("common.notImplemented")})]})]})]})]})}function Ve(){const{i18n:i}=w(),r=p.useMemo(()=>Q(i.language||"en"),[i.language]),[c,n]=p.useState(!1),[d,t]=p.useState("shiftbook"),[l,m]=p.useState("light"),[s,a]=p.useState("comfortable"),[x,b]=p.useState([]),[g,h]=p.useState(""),[j,y]=p.useState({area:"",status:""}),_=p.useMemo(()=>{const o=r.entries||[];if(x.length===0)return o;const u=new Map(x.map(k=>[k.id,k])),f=o.map(k=>u.get(k.id)||k);return x.forEach(k=>{o.some(O=>O.id===k.id)||f.unshift(k)}),f},[r,x]),F=p.useMemo(()=>{let o=_;if(g){const u=g.toLowerCase();o=o.filter(f=>f.title.toLowerCase().includes(u)||f.description.toLowerCase().includes(u)||f.id.toLowerCase().includes(u))}return j.area&&(o=o.filter(u=>u.areaId===j.area||u.area_id===j.area)),j.status&&(o=o.filter(u=>u.status===j.status)),o},[_,g,j]),[M,C]=p.useState(null),[Ie,S]=p.useState(!1);p.useEffect(()=>{l==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[l]);const V=()=>{C({id:"new",status:"Draft",priority:"Normal"}),S(!0)},D=o=>{if(console.log("Saving entry:",o),o.id==="new"){const u={...o,id:`sb-${Date.now()}`,created_at:new Date().toISOString(),status:"Open",created_by_user_id:"current-user"};b(f=>[u,...f])}else b(u=>{const f=u.filter(k=>k.id!==o.id);return[{...o},...f]});C(null),S(!1)};return e.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 overflow-hidden font-sans transition-colors duration-200",children:[e.jsx(Se,{activeModule:d,onModuleChange:t,isOpen:c,onClose:()=>n(!1),isOffline:!1}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[e.jsx(Me,{onMenuClick:()=>n(!0),theme:l,onThemeToggle:()=>m(o=>o==="light"?"dark":"light"),notifications:3}),d==="shiftbook"?e.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx($e,{onSearch:h,filters:j,onFilterChange:(o,u)=>y(f=>({...f,[o]:u})),onClearFilters:()=>{y({area:"",status:""}),h("")},onCreateClick:V,areas:r.areas,density:s,onDensityChange:a}),e.jsx("div",{className:"flex-1 overflow-y-auto pt-4",children:e.jsx(_e,{entries:F,users:r.users,areas:r.areas,equipment:r.equipment,onEntryClick:o=>{C(o),S(!1)},density:s})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:e.jsxs("div",{className:"text-center p-8 opacity-60",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Module Placeholder"}),e.jsxs("p",{children:["The ",d," module is not implemented in this prototype."]}),e.jsx("button",{onClick:()=>t("shiftbook"),className:"mt-4 text-blue-600 hover:underline",children:"Return to Shift Book"})]})})]}),M&&e.jsx(Le,{entry:M,onClose:()=>{C(null),S(!1)},onSave:D},M?.id||"new")]})}export{Ve as default};
