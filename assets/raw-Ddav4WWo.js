import{r as x,j as e,R as g}from"./index-BgVPyg3K.js";const l=({path:s,className:a})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:a||"w-5 h-5",children:e.jsx("path",{d:s})}),j=s=>e.jsx(l,{path:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2zM22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",...s}),A=s=>e.jsx(l,{path:"M12 18H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M18 10h4a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-4",...s}),B=s=>e.jsx(l,{path:"M12 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM9 15l2 2 4-4",...s}),E=s=>e.jsx(l,{path:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 .54 1.11l.08.3a2 2 0 0 1 0 2l-.08.3a2 2 0 0 1-.54 1.11l-.15.1a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-.54-1.11l-.08-.3a2 2 0 0 1 0-2l.08-.3a2 2 0 0 1 .54-1.11l.15-.1a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z",...s}),P=s=>e.jsx(l,{path:"M21 21l-4.35-4.35M11 19a8 8 0 1 0 0-16 8 8 0 0 0 0 16z",...s}),Z=s=>e.jsx(l,{path:"M8 2v4M16 2v4M3 10h18M5 14h2M10 14h2M15 14h2M5 18h2M10 18h2M15 18h2M3 6a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",...s}),q=s=>e.jsx(l,{path:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0zM12 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",...s}),f=s=>e.jsx(l,{path:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82zM7 7h.01",...s}),H=s=>e.jsx(l,{path:"M6 9l6 6 6-6",...s}),N=s=>e.jsx(l,{path:"M12 5v14M5 12h14",...s}),z=s=>e.jsx(l,{path:"M18 6L6 18M6 6l12 12",...s}),I=s=>e.jsx(l,{path:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48",...s}),$=s=>e.jsx(l,{path:"M9 11l3 3L22 4M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",...s}),_=s=>e.jsx(l,{path:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",...s}),v=s=>e.jsx(l,{path:"M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20zM12 6v6l4 2",...s}),w=s=>e.jsx(l,{path:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2M12 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z",...s}),F=s=>e.jsx(l,{path:"M18 10a8 8 0 0 0-16 0M12 2v10m-4 0l4 4 4-4",...s}),p=s=>e.jsx(l,{path:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8zM14 2v6h6M16 13H8M16 17H8M10 9H8",...s}),D=s=>e.jsx(l,{path:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8zM14 2v6h6M10 12l2 2 4-4M8 18l1-1 2 2",...s}),L=s=>e.jsx(l,{path:"M12 20c.3 0 .5-.1.8-.2l-1.4-1.4C11.3 18 11 17.7 11 17s.3-1 1-1h.5l-1-1H11c-1.1 0-2-.9-2-2s.9-2 2-2h.5l-1-1H11c-2.2 0-4 1.8-4 4s1.8 4 4 4h1zm7-5c0-2.8-1.5-5.2-3.8-6.4l-1.4 1.4C15.2 11 16 12.9 16 15h1zm-1.6 3.4L18 17c0-4.4-3.6-8-8-8c-2.4 0-4.5 1-6 2.6l1.4 1.4C6.9 12 8.4 11 10 11c3.3 0 6 2.7 6 6h-1.6zM2 4.9L3.1 3.8C6.6 1.3 11.2 0 16 0c5.3 0 10 1.6 14 4.5l-1.1 1.1C25.4 3.4 20.9 2 16 2c-4.4 0-8.4 1.2-11.8 3.2L2 4.9z",...s}),V=s=>e.jsx(l,{path:"M9 18v-6m0-6V0m6 18v-6m0-6V0",...s}),U={"user-1":{id:"user-1",displayName:"Sarah Jenkins",role:"Supervisor"},"user-2":{id:"user-2",displayName:"Tom Brokaw",role:"Editor"},"user-3":{id:"user-3",displayName:"Mike Schmidt",role:"Editor"},"user-4":{id:"user-4",displayName:"SYS-Admin",role:"Admin"},"user-5":{id:"user-5",displayName:"Kiosk-T1",role:"Editor (Shared)"}},O={"area-1":{id:"area-1",name:"Packaging Line 1"},"area-2":{id:"area-2",name:"Raw Material Intake"},"area-3":{id:"area-3",name:"Utilities & Steam Gen"}},R={"equip-1":{id:"equip-1",kap_number:"750-P-101A",label:"Primary Feed Pump A"},"equip-2":{id:"equip-2",kap_number:"750-C-203",label:"Compressor C-203"},"equip-3":{id:"equip-3",kap_number:"751-B-400",label:"Boiler 4"}},J=[{id:"sb-1",site_id:"site-1",area_id:"area-1",equipment_id:"equip-1",type:"Instruction",status:"Open",priority:"High",title:"Feed Pump 750-P-101A vibrating, requires check",description:"Morning shift operator reported excessive vibration on P-101A. Please inspect bearings and alignment before starting the next batch. See attached thermal image.",actionsTaken:"",created_by_user_id:"user-2",created_via_actor_id:null,assigned_to_user_id:"user-3",created_at:"2025-11-14T06:15:23Z",updated_at:"2025-11-14T06:15:23Z",due_at:"2025-11-14T14:00:00Z",attachments:[{id:"att-1",uploader_user_id:"user-2",filename:"P-101A-thermal.jpg",mime_type:"image/jpeg",size_bytes:812e3,created_at:"2025-11-14T06:15:20Z"},{id:"att-2",uploader_user_id:"user-2",filename:"vibration-specs.pdf",mime_type:"application/pdf",size_bytes:12e5,created_at:"2025-11-14T06:15:21Z"}],checklist:[{id:"cl-1",text:"Inspect pump bearings",is_done:!1,position:0,done_by_user_id:null},{id:"cl-2",text:"Check alignment",is_done:!1,position:1,done_by_user_id:null},{id:"cl-3",text:"Sign off for operation",is_done:!1,position:2,done_by_user_id:null}],comments:[{id:"c-1",parent_comment_id:null,author_user_id:"user-1",body:"Mike, let me know what you find. This is critical for the next run.",created_at:"2025-11-14T06:20:01Z"}],history:[{event:"Created",user_id:"user-2",timestamp:"2025-11-14T06:15:23Z",details:"Entry created by Tom Brokaw"},{event:"Comment Added",user_id:"user-1",timestamp:"2025-11-14T06:20:01Z",details:"Sarah Jenkins added a comment"}]},{id:"sb-2",site_id:"site-1",area_id:"area-3",equipment_id:"equip-3",type:"Record",status:"Completed",priority:"Medium",title:"Boiler 4 startup procedure completed",description:"Boiler 4 brought online as per SOP-112. All parameters normal.",actionsTaken:"Followed startup checklist, monitored steam drum pressure, and confirmed stable operation.",created_by_user_id:"user-5",created_via_actor_id:"user-3",assigned_to_user_id:null,created_at:"2025-11-14T04:30:11Z",updated_at:"2025-11-14T05:00:00Z",completed_at:"2025-11-14T05:00:00Z",attachments:[],checklist:[{id:"cl-4",text:"Verify water levels",is_done:!0,position:0,done_by_user_id:"user-3"},{id:"cl-5",text:"Ignite pilot",is_done:!0,position:1,done_by_user_id:"user-3"},{id:"cl-6",text:"Ramp to 50% pressure",is_done:!0,position:2,done_by_user_id:"user-3"},{id:"cl-7",text:"Confirm stable ops",is_done:!0,position:3,done_by_user_id:"user-3"}],comments:[],history:[{event:"Created",user_id:"user-3",timestamp:"2025-11-14T04:30:11Z",details:"Entry created by Mike Schmidt (via Kiosk-T1)"},{event:"Status Change",user_id:"user-3",timestamp:"2025-11-14T05:00:00Z",details:"Status changed to Completed"}]},{id:"sb-3",site_id:"site-1",area_id:"area-2",equipment_id:null,type:"Suggestion",status:"In Progress",priority:"Normal",title:'Suggestion: Add safety mirror at "Intake" corner',description:"Forklift traffic and pedestrian traffic have a blind spot near the main intake bay. Suggesting we install a convex safety mirror.",actionsTaken:"Forwarded to safety committee. Area marked with temporary cones.",created_by_user_id:"user-2",created_via_actor_id:null,assigned_to_user_id:"user-1",created_at:"2025-11-13T10:05:00Z",updated_at:"2025-11-13T11:20:00Z",attachments:[{id:"att-3",uploader_user_id:"user-2",filename:"blind-corner-photo.jpg",mime_type:"image/jpeg",size_bytes:124e4,created_at:"2025-11-13T10:05:10Z"}],checklist:[],comments:[{id:"c-2",parent_comment_id:null,author_user_id:"user-1",body:"Good catch, Tom. I've put in a work order for this.",created_at:"2025-11-13T11:20:00Z"},{id:"c-3",parent_comment_id:"c-2",author_user_id:"user-2",body:"Great, thanks Sarah!",created_at:"2025-11-13T11:25:00Z"}],history:[{event:"Created",user_id:"user-2",timestamp:"2025-11-13T10:05:00Z",details:"Entry created by Tom Brokaw"},{event:"Status Change",user_id:"user-1",timestamp:"2025-11-13T11:20:00Z",details:"Status changed to In Progress by Sarah Jenkins"},{event:"Comment Added",user_id:"user-1",timestamp:"2025-11-13T11:20:00Z",details:"Sarah Jenkins added a comment"},{event:"Comment Added",user_id:"user-2",timestamp:"2025-11-13T11:25:00Z",details:"Tom Brokaw replied"}]},{id:"sb-4",site_id:"site-1",area_id:"area-1",equipment_id:"equip-2",type:"Record",status:"Completed",priority:"Normal",title:"Hourly reading for C-203",description:"Performed hourly check on Compressor C-203.",actionsTaken:"Pressure: 450 psi, Temp: 120F, Vibration: 0.1 ips. All nominal.",created_by_user_id:"user-3",created_via_actor_id:null,assigned_to_user_id:null,created_at:"2025-11-14T06:00:00Z",updated_at:"2025-11-14T06:00:00Z",completed_at:"2025-11-14T06:00:00Z",attachments:[],checklist:[],comments:[],history:[{event:"Created",user_id:"user-3",timestamp:"2025-11-14T06:00:00Z",details:"Entry created by Mike Schmidt"},{event:"Status Change",user_id:"user-3",timestamp:"2025-11-14T06:00:00Z",details:"Status changed to Completed"}]}],u=s=>s?new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):"N/A",G=(s,a=2)=>{if(s===0)return"0 Bytes";const t=1024,i=a<0?0:a,r=["Bytes","KB","MB","GB","TB"],n=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,n)).toFixed(i))+" "+r[n]},c=s=>U[s]||{displayName:"Unknown User"},k=s=>O[s]||{name:"Unknown Area"},M=s=>R[s]||{kap_number:"N/A",label:"N/A"},K=({icon:s,text:a,isActive:t,onClick:i,isStubbed:r})=>e.jsxs("button",{onClick:i,disabled:r,className:`flex items-center w-full px-4 py-2.5 rounded-lg text-sm font-medium transition-colors
      ${t?"bg-blue-600 text-white":"text-gray-200 hover:bg-gray-700 hover:text-white"}
      ${r?"opacity-50 cursor-not-allowed":""}
    `,children:[g.cloneElement(s,{className:"w-5 h-5 mr-3"}),a]}),y=({status:s})=>{const a={Open:"bg-blue-100 text-blue-800","In Progress":"bg-yellow-100 text-yellow-800",Completed:"bg-green-100 text-green-800",Cancelled:"bg-gray-100 text-gray-800"},t={Open:"bg-blue-500","In Progress":"bg-yellow-500",Completed:"bg-green-500",Cancelled:"bg-gray-500"};return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a[s]||"bg-gray-100 text-gray-800"}`,children:[e.jsx("span",{className:`w-2 h-2 mr-1.5 rounded-full ${t[s]||"bg-gray-500"}`}),s]})},b=({priority:s})=>{const a={High:"text-red-500",Medium:"text-yellow-500",Normal:"text-gray-400"},t={High:"M12 5l0 14M19 12l-7 7-7-7",Medium:"M5 12h14",Normal:"M12 5l0 14M19 12l-7 7-7-7"},i={High:"rotate-180",Medium:"",Normal:""};return e.jsx("span",{title:s,children:e.jsx(l,{path:t[s],className:`w-5 h-5 ${a[s]} ${i[s]}`})})},h=({icon:s,text:a})=>e.jsxs("button",{className:"flex items-center bg-white border border-gray-300 rounded-md px-3 py-1.5 text-sm text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[g.cloneElement(s,{className:"w-4 h-4 mr-1.5 text-gray-500"}),a,e.jsx(H,{className:"w-4 h-4 ml-2 text-gray-400"})]}),W=({text:s,icon:a,isActive:t,onClick:i})=>e.jsxs("button",{onClick:i,className:`flex items-center px-4 py-2.5 font-medium text-sm rounded-md transition-colors
      ${t?"bg-blue-50 text-blue-600":"text-gray-500 hover:text-gray-900 hover:bg-gray-100"}
    `,"data-state":t?"active":"inactive",children:[g.cloneElement(a,{className:"w-5 h-5 mr-2"}),s]}),d=({label:s,children:a})=>e.jsxs("div",{className:"py-3",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:s}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:a})]}),Y=({entry:s})=>{const a=c(s.created_by_user_id),t=s.created_via_actor_id?c(s.created_via_actor_id):null,i=s.assigned_to_user_id?c(s.assigned_to_user_id):null,r=k(s.area_id),n=s.equipment_id?M(s.equipment_id):null;return e.jsx("div",{className:"py-4 px-1",children:e.jsxs("dl",{className:"grid grid-cols-1 md:grid-cols-3 gap-x-6 gap-y-2",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx(d,{label:"Type",children:s.type}),e.jsx(d,{label:"Area",children:r.name}),e.jsx(d,{label:"Equipment",children:n?`${n.label} (${n.kap_number})`:"N/A"})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx(d,{label:"Status",children:e.jsx(y,{status:s.status})}),e.jsx(d,{label:"Priority",children:e.jsxs("span",{className:`inline-flex items-center font-medium ${s.priority==="High"?"text-red-600":s.priority==="Medium"?"text-yellow-600":"text-gray-600"}`,children:[e.jsx(b,{priority:s.priority}),e.jsx("span",{className:"ml-1.5",children:s.priority})]})}),e.jsx(d,{label:"Due Date",children:u(s.due_at)})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx(d,{label:"Created By",children:t?`${t.displayName} (via ${a.displayName})`:a.displayName}),e.jsx(d,{label:"Assigned To",children:i?i.displayName:"Unassigned"}),e.jsx(d,{label:"Created At",children:u(s.created_at)})]}),e.jsx("div",{className:"md:col-span-3",children:e.jsx(d,{label:"Description",children:e.jsx("div",{className:"prose prose-sm max-w-none text-gray-900",dangerouslySetInnerHTML:{__html:s.description.replace(/\n/g,"<br />")}})})}),e.jsx("div",{className:"md:col-span-3",children:e.jsx(d,{label:"Actions Taken",children:s.actionsTaken?e.jsx("div",{className:"prose prose-sm max-w-none text-gray-900",dangerouslySetInnerHTML:{__html:s.actionsTaken.replace(/\n/g,"<br />")}}):e.jsx("span",{className:"text-gray-500 italic",children:"No actions logged yet."})})})]})})},X=({attachments:s})=>{const a=t=>t.startsWith("image/")?e.jsx(D,{className:"w-8 h-8 text-blue-500"}):t==="application/pdf"?e.jsx(p,{className:"w-8 h-8 text-red-500"}):e.jsx(p,{className:"w-8 h-8 text-gray-500"});return e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"mb-6 border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-500 transition",children:[e.jsx(F,{className:"w-12 h-12 mx-auto text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm font-medium text-gray-900",children:"Drag and drop files here"}),e.jsx("p",{className:"text-xs text-gray-500",children:"or click to select files. You can also use your device camera."}),e.jsx("button",{className:"mt-4 px-4 py-2 bg-gray-100 text-sm font-medium text-gray-700 rounded-md hover:bg-gray-200",children:"Select Files"})]}),e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:[s.length," ",s.length===1?"Attachment":"Attachments"]}),e.jsx("ul",{className:"divide-y divide-gray-200 border border-gray-200 rounded-md",children:s.length===0?e.jsx("li",{className:"p-4 text-center text-gray-500",children:"No attachments yet."}):s.map(t=>e.jsxs("li",{className:"flex items-center justify-between p-3 hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center min-w-0",children:[e.jsx("div",{className:"flex-shrink-0 mr-3",children:a(t.mime_type)}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.filename}),e.jsxs("p",{className:"text-sm text-gray-500",children:[G(t.size_bytes)," Â· Added by"," ",c(t.uploader_user_id).displayName]})]})]}),e.jsxs("div",{className:"flex-shrink-0 ml-4",children:[e.jsx("button",{className:"text-sm font-medium text-blue-600 hover:text-blue-800",children:"Download"}),e.jsx("button",{className:"ml-3 text-sm font-medium text-gray-600 hover:text-gray-800",children:"Preview"})]})]},t.id))})]})},Q=({checklist:s})=>{const a=s.filter(r=>r.is_done).length,t=s.length,i=t>0?a/t*100:0;return e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Checklist (",a," of ",t," completed)"]}),e.jsx("button",{className:"text-sm font-medium text-blue-600 hover:text-blue-800",children:"+ Add Item"})]}),t>0&&e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${i}%`}})})}),e.jsx("ul",{className:"space-y-3",children:s.length===0?e.jsx("li",{className:"text-center text-gray-500 italic",children:"No checklist items."}):s.sort((r,n)=>r.position-n.position).map(r=>e.jsxs("li",{className:"flex items-start p-3 bg-gray-50 rounded-md",children:[e.jsx(V,{className:"w-5 h-5 text-gray-400 mr-2 flex-shrink-0 cursor-move"}),e.jsx("input",{type:"checkbox",checked:r.is_done,readOnly:!0,className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 mt-0.5"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("label",{className:`text-sm ${r.is_done?"text-gray-500 line-through":"text-gray-900"}`,children:r.text}),r.is_done&&r.done_by_user_id&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Completed by ",c(r.done_by_user_id).displayName]})]})]},r.id))})]})},C=({comment:s,allComments:a})=>{const t=c(s.author_user_id),i=a.filter(r=>r.parent_comment_id===s.id);return e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"inline-flex items-center justify-center h-8 w-8 rounded-full bg-gray-200 text-gray-600 font-medium",children:t.displayName.substring(0,1)})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-900",children:t.displayName}),e.jsx("span",{className:"ml-2 text-gray-500",children:u(s.created_at)})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-700",children:s.body}),e.jsx("button",{className:"mt-1 text-xs font-medium text-gray-500 hover:text-gray-800",children:"Reply"}),i.length>0&&e.jsx("div",{className:"mt-3 space-y-3",children:i.map(r=>e.jsx(C,{comment:r,allComments:a},r.id))})]})]})},ee=({comments:s})=>{const a=s.filter(t=>!t.parent_comment_id);return e.jsxs("div",{className:"py-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Comments"}),e.jsxs("div",{className:"flex space-x-3 mb-6",children:[e.jsx("span",{className:"inline-flex items-center justify-center h-8 w-8 rounded-full bg-blue-600 text-white font-medium",children:"U"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{rows:"3",className:"w-full p-2 border border-gray-300 rounded-md shadow-sm text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"Add a comment... use @ to mention someone."}),e.jsx("div",{className:"mt-2 flex justify-end",children:e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700",children:"Post Comment"})})]})]}),e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsx("p",{className:"text-center text-gray-500 italic",children:"No comments yet."}):a.map(t=>e.jsx(C,{comment:t,allComments:s},t.id))})]})},se=({history:s})=>{const a=t=>{switch(t){case"Created":return e.jsx(N,{className:"w-4 h-4 text-green-500"});case"Status Change":return e.jsx(f,{className:"w-4 h-4 text-blue-500"});case"Comment Added":return e.jsx(_,{className:"w-4 h-4 text-gray-500"});case"Assigned":return e.jsx(w,{className:"w-4 h-4 text-purple-500"});default:return e.jsx(v,{className:"w-4 h-4 text-gray-400"})}};return e.jsxs("div",{className:"py-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Entry History"}),e.jsx("ul",{className:"space-y-4",children:s.length===0?e.jsx("li",{className:"text-center text-gray-500 italic",children:"No history logged."}):s.sort((t,i)=>new Date(i.timestamp)-new Date(t.timestamp)).map((t,i)=>e.jsxs("li",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-gray-100 flex items-center justify-center",children:a(t.event)}),e.jsxs("div",{className:"flex-1 pt-1.5",children:[e.jsx("p",{className:"text-sm text-gray-700",children:t.details}),e.jsx("p",{className:"text-xs text-gray-500",children:u(t.timestamp)})]})]},i))})]})},te=({currentPage:s,onNavClick:a,isOffline:t})=>{const i=[{id:"shiftbook",text:"Shift Book",icon:e.jsx(j,{}),isStubbed:!1},{id:"capture",text:"Manual Capture",icon:e.jsx(B,{}),isStubbed:!0},{id:"reporting",text:"Reporting",icon:e.jsx(A,{}),isStubbed:!0},{id:"admin",text:"Admin",icon:e.jsx(E,{}),isStubbed:!0}];return e.jsxs("div",{className:"flex flex-col w-64 bg-gray-800 text-white h-screen fixed",children:[e.jsxs("div",{className:"flex items-center h-16 px-6 border-b border-gray-700 flex-shrink-0",children:[e.jsx(j,{className:"w-8 h-8 text-blue-400"}),e.jsx("span",{className:"ml-3 text-xl font-semibold",children:"Schichtbuch"})]}),e.jsx("nav",{className:"flex-1 p-4 space-y-2",children:i.map(r=>e.jsx(K,{icon:r.icon,text:r.text,isActive:s===r.id,isStubbed:r.isStubbed,onClick:()=>a(r.id)},r.id))}),t&&e.jsx("div",{className:"p-4 border-t border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-center p-2 rounded-md bg-yellow-500 text-yellow-900",children:[e.jsx(L,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Offline - Syncing..."})]})}),e.jsx("div",{className:"p-4 border-t border-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"inline-flex items-center justify-center h-9 w-9 rounded-full bg-blue-600 font-medium",children:"SJ"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-white",children:"Sarah Jenkins"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Supervisor"})]})]})})]})},ae=({onNewEntry:s})=>e.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(P,{className:"w-5 h-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search entries & attachments...",className:"w-64 pl-10 pr-4 py-1.5 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx(h,{icon:e.jsx(Z,{}),text:"Date Range"}),e.jsx(h,{icon:e.jsx(q,{}),text:"Area"}),e.jsx(h,{icon:e.jsx(f,{}),text:"Status"})]}),e.jsxs("button",{onClick:s,className:"flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:[e.jsx(N,{className:"w-5 h-5 mr-1.5"}),"Create New Entry"]})]}),re=({entries:s,onSelectEntry:a})=>e.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow border border-gray-200",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prio"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"KAP / Equipment"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created By"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(t=>{const i=c(t.created_by_user_id),r=k(t.area_id),n=t.equipment_id?M(t.equipment_id):null;return e.jsxs("tr",{onClick:()=>a(t),className:"hover:bg-gray-50 cursor-pointer",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx(y,{status:t.status})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx(b,{priority:t.priority})}),e.jsxs("td",{className:"px-4 py-3 max-w-sm",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:t.title}),e.jsx("div",{className:"text-sm text-gray-500 truncate",children:t.type})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:n?e.jsxs("div",{children:[e.jsx("div",{children:n.kap_number}),e.jsx("div",{className:"text-xs text-gray-500",children:n.label})]}):"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:r.name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:i.displayName}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:u(t.created_at)})]},t.id)})})]})}),ie=({onSelectEntry:s})=>{const[a,t]=x.useState(J);return e.jsxs("div",{className:"p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Shift Book"}),e.jsx(ae,{onNewEntry:()=>console.warn("New Entry form would open here.")}),e.jsx(re,{entries:a,onSelectEntry:s})]})},le=({entry:s,onClose:a})=>{const[t,i]=x.useState("details");if(!s)return null;const r=[{id:"details",text:"Details",icon:e.jsx(p,{})},{id:"attachments",text:"Attachments",icon:e.jsx(I,{})},{id:"checklist",text:"Checklist",icon:e.jsx($,{})},{id:"comments",text:"Comments",icon:e.jsx(_,{})},{id:"history",text:"History",icon:e.jsx(v,{})}],n=s.assigned_to_user_id?c(s.assigned_to_user_id):null;return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:a}),e.jsxs("div",{className:"relative bg-white w-full max-w-6xl h-[90vh] rounded-xl shadow-2xl flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1.5 text-sm text-gray-500",children:[e.jsx(y,{status:s.status}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(b,{priority:s.priority}),e.jsxs("span",{className:"ml-1.5",children:[s.priority," Priority"]})]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(w,{className:"w-4 h-4 mr-1.5"}),n?`Assigned to ${n.displayName}`:"Unassigned"]})]})]}),e.jsx("button",{onClick:a,className:"p-2 rounded-full text-gray-400 hover:bg-gray-100 hover:text-gray-600",children:e.jsx(z,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"w-56 border-r border-gray-200 bg-gray-50/50 p-4 space-y-1",children:r.map(o=>e.jsx(W,{text:o.text,icon:o.icon,isActive:t===o.id,onClick:()=>i(o.id)},o.id))}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[t==="details"&&e.jsx(Y,{entry:s}),t==="attachments"&&e.jsx(X,{attachments:s.attachments}),t==="checklist"&&e.jsx(Q,{checklist:s.checklist}),t==="comments"&&e.jsx(ee,{comments:s.comments}),t==="history"&&e.jsx(se,{history:s.history})]})]}),e.jsxs("div",{className:"p-6 bg-gray-50 border-t border-gray-200 flex-shrink-0 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"px-4 py-2 bg-white border border-gray-300 text-sm font-medium rounded-md hover:bg-gray-50",children:"Follow"}),e.jsx("button",{className:"px-4 py-2 bg-white border border-gray-300 text-sm font-medium rounded-md hover:bg-gray-50",children:"Export"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{className:"px-4 py-2 bg-white border border-gray-300 text-sm font-medium rounded-md hover:bg-gray-50",children:"Update Status"}),e.jsx("button",{className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700",children:"Mark as Completed"})]})]})]})]})};function de(){const[s,a]=x.useState("shiftbook"),[t,i]=x.useState(null),[r,n]=x.useState(!0),o=m=>{m==="shiftbook"?a(m):console.warn(`${m} module is stubbed out for this prototype.`)},S=m=>{i(m)},T=()=>{i(null)};return e.jsxs("div",{className:"flex h-screen bg-gray-100",children:[e.jsx(te,{currentPage:s,onNavClick:o,isOffline:r}),e.jsx("main",{className:"flex-1 ml-64 h-screen overflow-y-auto",children:s==="shiftbook"&&e.jsx(ie,{onSelectEntry:S})}),e.jsx(le,{entry:t,onClose:T})]})}export{de as default};
