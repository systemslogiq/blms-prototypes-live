import{r as i,j as e,R as E}from"./index-B6KA1Glt.js";import{c as m,X as N,D,M as I}from"./x-CKHW-tDl.js";import{H as Z,C as _,S as H,F as w,a as R,b as F}from"./square-chart-gantt-DuSs8jpl.js";import{U as h,B as z,S as O,c as y,b as k,M as $,H as U,T as K,a as L,d as W,C as b,P as G}from"./user-DXT7_a35.js";const Q=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],V=m("check",Q);const X=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],J=m("chevron-up",X);const Y=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],C=m("chevrons-up",Y);const ee=[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]],se=m("hard-hat",ee);const te=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],ae=m("inbox",te);const re=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],ne=m("sliders-horizontal",re);const ie=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],le=m("user-check",ie),de=[{id:"sb-001",site_id:"S-01",area_id:"A-01",area_name:"Area 1 - Reactors",equipment_id:"E-1001",equipment_name:"R-101 / KAP-12345",type:"Instruction",status:"Open",priority:"High",title:"Check reactor R-101 temperature spike",description:"Reactor R-101 reported a sudden temperature anomaly at 03:15. Please investigate immediately, check sensor calibration, and report findings. Follow safety protocol P-7.",actions_taken:"",created_by_user_id:"u-kiosk",created_by_user_name:"Kiosk (Max Mustermann)",assigned_to_user_id:"u-007",assigned_to_user_name:"Alex Weber",due_at:"2025-11-15T08:00:00Z",completed_at:null,confidential:!1,created_at:"2025-11-15T03:30:12Z",updated_at:"2025-11-15T03:30:12Z",attachments:[{id:"att-01",filename:"R-101_temp_chart.png",size_bytes:120480,type:"image/png"},{id:"att-02",filename:"Safety_Protocol_P-7.pdf",size_bytes:450123,type:"application/pdf"}],checklist:[{id:"cl-01",text:"Confirm safety clearance",is_done:!0,done_by:"Alex Weber"},{id:"cl-02",text:"Check sensor T-101a",is_done:!1,done_by:null},{id:"cl-03",text:"Check sensor T-101b",is_done:!1,done_by:null},{id:"cl-04",text:"Report to supervisor",is_done:!1,done_by:null}],comments:[{id:"c-01",author:"Sarah Chen",body:"@Alex Weber - I saw this come in. Be careful, the maintenance team was working near the sensor array earlier.",created_at:"2025-11-15T03:45:00Z"}],history:[{id:"h-01",user:"Kiosk (Max Mustermann)",action:"Created entry",timestamp:"2025-11-15T03:30:12Z"},{id:"h-02",user:"System",action:"Assigned to Alex Weber",timestamp:"2025-11-15T03:30:12Z"},{id:"h-03",user:"Sarah Chen",action:"Added comment",timestamp:"2025-11-15T03:45:00Z"}]},{id:"sb-002",site_id:"S-01",area_id:"A-02",area_name:"Area 2 - Packaging",equipment_id:"E-2005",equipment_name:"L-205 / KAP-54321",type:"Record",status:"InProgress",priority:"Medium",title:"Line 5 hourly QA check",description:"Performing standard hourly quality assurance checks for Line 5.",actions_taken:"Samples 1-3 all within spec. Sample 4 pending.",created_by_user_id:"u-008",created_by_user_name:"Sarah Chen",assigned_to_user_id:"u-008",assigned_to_user_name:"Sarah Chen",due_at:null,completed_at:null,confidential:!1,created_at:"2025-11-15T02:15:00Z",updated_at:"2025-11-15T03:00:00Z",attachments:[],checklist:[{id:"cl-05",text:"Sample 1 (Weight)",is_done:!0,done_by:"Sarah Chen"},{id:"cl-06",text:"Sample 2 (Seal)",is_done:!0,done_by:"Sarah Chen"},{id:"cl-07",text:"Sample 3 (Label)",is_done:!0,done_by:"Sarah Chen"},{id:"cl-08",text:"Sample 4 (Barcode)",is_done:!1,done_by:null}],comments:[],history:[{id:"h-04",user:"Sarah Chen",action:"Created entry",timestamp:"2025-11-15T02:15:00Z"},{id:"h-05",user:"Sarah Chen",action:"Updated status to InProgress",timestamp:"2025-11-15T02:16:00Z"},{id:"h-06",user:"Sarah Chen",action:"Updated checklist",timestamp:"2025-11-15T03:00:00Z"}]},{id:"sb-003",site_id:"S-01",area_id:"A-01",area_name:"Area 1 - Reactors",equipment_id:null,equipment_name:null,type:"Suggestion",status:"Completed",priority:"Normal",title:"Suggestion for tool placement",description:"The standard toolkit for valve adjustments should be placed on the west wall, not in the south cabinet. It would save ~5 minutes per adjustment.",actions_taken:"Discussed with shift lead. Approved. Moved toolkit to new location.",created_by_user_id:"u-015",created_by_user_name:"Ben Schmidt",assigned_to_user_id:"u-015",assigned_to_user_name:"Ben Schmidt",due_at:null,completed_at:"2025-11-14T14:00:00Z",confidential:!1,created_at:"2025-11-14T10:30:00Z",updated_at:"2025-11-14T14:00:00Z",attachments:[],checklist:[],comments:[],history:[{id:"h-07",user:"Ben Schmidt",action:"Created entry",timestamp:"2025-11-14T10:30:00Z"},{id:"h-08",user:"Ben Schmidt",action:"Updated status to Completed",timestamp:"2025-11-14T14:00:00Z"}]},{id:"sb-004",site_id:"S-01",area_id:"A-03",area_name:"Area 3 - Utilities",equipment_id:"E-3001",equipment_name:"C-301 / KAP-98765",type:"Record",status:"Open",priority:"Normal",title:"Compressor C-301 minor vibration",description:"Noticed a minor, unusual vibration on Compressor C-301 during rounds. No alarms triggered, but worth monitoring.",actions_taken:"",created_by_user_id:"u-007",created_by_user_name:"Alex Weber",assigned_to_user_id:null,assigned_to_user_name:null,due_at:null,completed_at:null,confidential:!1,created_at:"2025-11-15T04:05:00Z",updated_at:"2025-11-15T04:05:00Z",attachments:[],checklist:[],comments:[],history:[{id:"h-09",user:"Alex Weber",action:"Created entry",timestamp:"2025-11-15T04:05:00Z"}]}],ce=[{id:"u-007",name:"Alex Weber"},{id:"u-008",name:"Sarah Chen"},{id:"u-015",name:"Ben Schmidt"},{id:"u-kiosk",name:"Kiosk (Max Mustermann)"}],oe=[{id:"A-01",name:"Area 1 - Reactors"},{id:"A-02",name:"Area 2 - Packaging"},{id:"A-03",name:"Area 3 - Utilities"}],me=[{id:"E-1001",name:"R-101 / KAP-12345"},{id:"E-2005",name:"L-205 / KAP-54321"},{id:"E-3001",name:"C-301 / KAP-98765"}],xe=["Open","InProgress","Completed","Cancelled"],he=["High","Medium","Normal"],ue=["Instruction","Record","Suggestion"],S=s=>{if(!s)return"N/A";try{return new Date(s).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid Date"}},pe=s=>{if(!s)return"";try{const t=new Date(s),a=t.getTimezoneOffset()*6e4;return new Date(t.getTime()-a).toISOString().slice(0,16)}catch{return""}},j=s=>{if(!s)return"";const t=new Date,a=new Date(s),n=Math.floor((t-a)/1e3);let r=n/31536e3;return r>1?Math.floor(r)+"y ago":(r=n/2592e3,r>1?Math.floor(r)+"mo ago":(r=n/86400,r>1?Math.floor(r)+"d ago":(r=n/3600,r>1?Math.floor(r)+"h ago":(r=n/60,r>1?Math.floor(r)+"m ago":Math.floor(n)+"s ago"))))},ge=s=>{if(s===0)return"0 Bytes";const t=1024,a=["Bytes","KB","MB","GB","TB"],n=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,n)).toFixed(2))+" "+a[n]},be=({status:s})=>{const t=i.useMemo(()=>{switch(s){case"Open":return"bg-blue-100 text-blue-800 ring-blue-600/20";case"InProgress":return"bg-yellow-100 text-yellow-800 ring-yellow-600/20";case"Completed":return"bg-green-100 text-green-800 ring-green-600/20";case"Cancelled":return"bg-gray-100 text-gray-800 ring-gray-600/20";default:return"bg-gray-100 text-gray-800 ring-gray-600/20"}},[s]);return e.jsx("span",{className:`inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${t}`,children:s})},A=({priority:s})=>{const t=i.useMemo(()=>{switch(s){case"High":return e.jsx(C,{className:"h-4 w-4 text-red-500","aria-label":"High Priority"});case"Medium":return e.jsx(J,{className:"h-4 w-4 text-orange-500","aria-label":"Medium Priority"});case"Normal":return e.jsx("div",{className:"h-4 w-4 flex items-center justify-center",children:e.jsx("span",{className:"h-0.5 w-3 bg-gray-400 rounded-full"})});default:return e.jsx("div",{className:"h-4 w-4 flex items-center justify-center",children:e.jsx("span",{className:"h-0.5 w-3 bg-gray-400 rounded-full"})})}},[s]);return e.jsx("span",{className:"tooltip","data-tip":s,children:t})},o=({icon:s,text:t,active:a=!1,stubbed:n=!1})=>e.jsxs("a",{href:"#",className:`
      flex items-center px-4 py-2.5 rounded-lg transition-colors
      ${a?"bg-gray-700 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}
      ${n?"opacity-50 cursor-not-allowed":""}
    `,onClick:r=>n&&r.preventDefault(),children:[e.jsx(s,{className:"h-5 w-5 mr-3"}),e.jsx("span",{className:"text-sm font-medium",children:t})]}),ye=({isOpen:s,onClose:t})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`absolute inset-0 z-30 bg-black/50 transition-opacity lg:hidden ${s?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:t}),e.jsxs("div",{className:`
        absolute inset-y-0 left-0 z-40 flex h-full w-64 flex-col bg-gray-900 text-white shadow-lg
        transition-transform duration-300 ease-in-out lg:translate-x-0
        ${s?"translate-x-0":"-translate-x-full"}
      `,children:[e.jsxs("div",{className:"flex h-16 items-center justify-between px-6 shadow-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(se,{className:"h-8 w-8 text-blue-400"}),e.jsx("span",{className:"ml-3 text-lg font-bold",children:"BLMS Platform"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white lg:hidden",children:e.jsx(N,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsxs("nav",{className:"flex flex-col gap-1",children:[e.jsx(o,{icon:Z,text:"Dashboard",stubbed:!0}),e.jsx(o,{icon:ae,text:"Shift Book",active:!0}),e.jsx(o,{icon:_,text:"Manual Capture",stubbed:!0}),e.jsx(o,{icon:H,text:"Campaigns",stubbed:!0}),e.jsx(o,{icon:D,text:"Plant Master",stubbed:!0}),e.jsx(o,{icon:w,text:"Reporting",stubbed:!0}),e.jsx(o,{icon:R,text:"Alarms & Events",stubbed:!0}),e.jsx(o,{icon:F,text:"Admin",stubbed:!0})]})}),e.jsx("div",{className:"border-t border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{className:"h-9 w-9 rounded-full bg-gray-600 p-1.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Alex Weber"}),e.jsx("span",{className:"block text-xs text-gray-400",children:"Supervisor"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5 text-gray-400 hover:text-white cursor-pointer"}),e.jsx(O,{className:"h-5 w-5 text-gray-400 hover:text-white cursor-pointer"})]})]})})]})]}),je=()=>e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 p-4 bg-white border-b border-gray-200",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(L,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search entries, text, attachments...",className:"block w-full rounded-md border-gray-300 pl-10 shadow-sm sm:text-sm focus:border-blue-500 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[e.jsxs("button",{className:"flex-1 sm:flex-none flex items-center justify-center gap-1.5 rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm text-gray-700 shadow-sm hover:bg-gray-50",children:[e.jsx(W,{className:"h-4 w-4 text-gray-500"}),"Area",e.jsx(b,{className:"h-4 w-4 text-gray-400"})]}),e.jsxs("button",{className:"flex-1 sm:flex-none flex items-center justify-center gap-1.5 rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm text-gray-700 shadow-sm hover:bg-gray-50",children:[e.jsx(k,{className:"h-4 w-4 text-gray-500"}),"Status",e.jsx(b,{className:"h-4 w-4 text-gray-400"})]}),e.jsxs("button",{className:"flex-1 sm:flex-none flex items-center justify-center gap-1.5 rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm text-gray-700 shadow-sm hover:bg-gray-50",children:[e.jsx(C,{className:"h-4 w-4 text-gray-500"}),"Priority",e.jsx(b,{className:"h-4 w-4 text-gray-400"})]}),e.jsxs("button",{className:"flex-1 sm:flex-none flex items-center justify-center gap-1.5 rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm text-gray-700 shadow-sm hover:bg-gray-50",children:[e.jsx(ne,{className:"h-4 w-4 text-gray-500"}),"All Filters"]}),e.jsxs("button",{className:"flex-1 sm:flex-none flex items-center justify-center gap-1.5 rounded-md border border-transparent bg-blue-600 px-3 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-700",children:[e.jsx(G,{className:"h-4 w-4"}),"New Entry"]})]})]}),fe=({entries:s,onOpenEntry:t})=>e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"sticky top-0 z-10 hidden md:grid grid-cols-[auto_2fr_1fr_1fr_1fr_1fr] gap-4 border-b border-gray-200 bg-gray-50 px-4 py-2 text-xs font-medium uppercase text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-4",children:"P"}),e.jsx("div",{className:"w-4",children:"S"})]}),e.jsx("div",{children:"Title"}),e.jsx("div",{children:"Area / Equipment"}),e.jsx("div",{children:"Assignee"}),e.jsx("div",{children:"Created By"}),e.jsx("div",{children:"Created At"})]}),e.jsx("div",{className:"divide-y divide-gray-200 md:divide-y-0",children:s.map(a=>e.jsxs(E.Fragment,{children:[e.jsx(ve,{entry:a,onOpenEntry:t}),e.jsx(Ne,{entry:a,onOpenEntry:t})]},a.id))})]})}),ve=({entry:s,onOpenEntry:t})=>e.jsxs("div",{className:"hidden md:grid grid-cols-[auto_2fr_1fr_1fr_1fr_1fr] gap-4 px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 cursor-pointer",onClick:()=>t(s),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-4",children:e.jsx(A,{priority:s.priority})}),e.jsx("div",{className:"w-4",children:s.status==="Completed"?e.jsx(V,{className:"h-4 w-4 text-green-600"}):e.jsx("div",{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"truncate",children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.title}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:s.description})]}),e.jsxs("div",{className:"truncate",children:[e.jsx("div",{className:"font-medium",children:s.area_name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.equipment_name||"N/A"})]}),e.jsx("div",{className:"truncate",children:s.assigned_to_user_name?e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(le,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:s.assigned_to_user_name})]}):e.jsx("span",{className:"text-gray-400 italic",children:"Unassigned"})}),e.jsx("div",{className:"truncate",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(h,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{children:s.created_by_user_name})]})}),e.jsxs("div",{className:"truncate text-gray-500",children:[e.jsx("div",{children:S(s.created_at)}),e.jsx("div",{className:"text-xs",children:j(s.created_at)})]})]}),Ne=({entry:s,onOpenEntry:t})=>e.jsxs("div",{className:"block md:hidden p-4 border-b border-gray-200 bg-white hover:bg-gray-50 cursor-pointer",onClick:()=>t(s),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(be,{status:s.status}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.attachments.length>0&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx("span",{children:s.attachments.length})]}),e.jsx(A,{priority:s.priority})]})]}),e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:s.title}),e.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:[e.jsx("p",{children:s.area_name}),s.equipment_name&&e.jsx("p",{className:"text-xs text-gray-500",children:s.equipment_name})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{children:s.created_by_user_name})]}),e.jsx("span",{children:j(s.created_at)})]})]}),_e=({icon:s,text:t,active:a,onClick:n})=>e.jsxs("button",{onClick:n,className:`
      flex items-center gap-2 px-4 py-3 text-sm font-medium transition-colors
      ${a?"border-b-2 border-blue-500 text-blue-600":"border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
    `,children:[e.jsx(s,{className:"h-5 w-5"}),e.jsx("span",{children:t})]}),l=({label:s,htmlFor:t,children:a,className:n=""})=>e.jsxs("div",{className:n,children:[e.jsx("label",{htmlFor:t,className:"block text-xs font-medium text-gray-500 uppercase tracking-wider",children:s}),e.jsx("div",{className:"mt-1.5",children:a})]}),f=({id:s,name:t,value:a,onChange:n,...r})=>e.jsx("input",{type:"text",id:s,name:t,value:a||"",onChange:n,className:"block w-full rounded-md border-gray-300 shadow-sm sm:text-sm focus:border-blue-500 focus:ring-blue-500",...r}),v=({id:s,name:t,value:a,onChange:n,rows:r=3,...c})=>e.jsx("textarea",{id:s,name:t,value:a||"",onChange:n,rows:r,className:"block w-full rounded-md border-gray-300 shadow-sm sm:text-sm focus:border-blue-500 focus:ring-blue-500",...c}),x=({id:s,name:t,value:a,onChange:n,children:r,...c})=>e.jsx("select",{id:s,name:t,value:a||"",onChange:n,className:"block w-full rounded-md border-gray-300 shadow-sm sm:text-sm focus:border-blue-500 focus:ring-blue-500",...c,children:r}),we=({formData:s,onFormChange:t})=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-x-8 gap-y-6",children:[e.jsxs("div",{className:"md:col-span-2 space-y-4",children:[e.jsx(l,{label:"Title",htmlFor:"title",children:e.jsx(f,{id:"title",name:"title",value:s.title,onChange:t,placeholder:"A brief, clear title for the entry"})}),e.jsx(l,{label:"Description",htmlFor:"description",children:e.jsx(v,{id:"description",name:"description",value:s.description,onChange:t,rows:6,placeholder:"Describe the event, instruction, or observation..."})}),e.jsx(l,{label:"Actions Taken",htmlFor:"actions_taken",children:e.jsx(v,{id:"actions_taken",name:"actions_taken",value:s.actions_taken,onChange:t,rows:4,placeholder:"What actions were performed?"})})]}),e.jsxs("div",{className:"md:col-span-1 space-y-4",children:[e.jsx(l,{label:"Status",htmlFor:"status",children:e.jsx(x,{id:"status",name:"status",value:s.status,onChange:t,children:xe.map(a=>e.jsx("option",{value:a,children:a},a))})}),e.jsx(l,{label:"Priority",htmlFor:"priority",children:e.jsx(x,{id:"priority",name:"priority",value:s.priority,onChange:t,children:he.map(a=>e.jsx("option",{value:a,children:a},a))})}),e.jsx(l,{label:"Type",htmlFor:"type",children:e.jsx(x,{id:"type",name:"type",value:s.type,onChange:t,children:ue.map(a=>e.jsx("option",{value:a,children:a},a))})}),e.jsx(l,{label:"Area",htmlFor:"area_id",children:e.jsxs(x,{id:"area_id",name:"area_id",value:s.area_id,onChange:t,children:[e.jsx("option",{value:"",children:"-- Select Area --"}),oe.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})}),e.jsx(l,{label:"Equipment (KAP)",htmlFor:"equipment_id",children:e.jsxs(x,{id:"equipment_id",name:"equipment_id",value:s.equipment_id,onChange:t,children:[e.jsx("option",{value:"",children:"-- Select Equipment (Optional) --"}),me.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})}),e.jsx(l,{label:"Assigned To",htmlFor:"assigned_to_user_id",children:e.jsxs(x,{id:"assigned_to_user_id",name:"assigned_to_user_id",value:s.assigned_to_user_id,onChange:t,children:[e.jsx("option",{value:"",children:"-- Unassigned --"}),ce.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})}),e.jsx(l,{label:"Due Date",htmlFor:"due_at",children:e.jsx(f,{id:"due_at",name:"due_at",type:"datetime-local",value:pe(s.due_at),onChange:t})}),e.jsx(l,{label:"Created By",children:e.jsx("p",{className:"text-sm text-gray-700 pt-1.5",children:s.created_by_user_name||"N/A"})})]})]}),ke=({attachments:s})=>e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 rounded-lg border-2 border-dashed border-gray-300 p-8 text-center",children:[e.jsx(y,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Drag & Drop files or click to upload"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Supports images, PDFs, and Office documents."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Attached Files"}),e.jsxs("ul",{className:"divide-y divide-gray-200 rounded-md border border-gray-200",children:[s.length===0&&e.jsx("li",{className:"p-4 text-center text-sm text-gray-500",children:"No files attached."}),s.map(t=>e.jsxs("li",{className:"flex items-center justify-between p-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"h-6 w-6 text-gray-400"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.filename}),e.jsxs("p",{className:"text-xs text-gray-500",children:[ge(t.size_bytes)," - ",t.type]})]})]}),e.jsx("button",{className:"text-sm font-medium text-blue-600 hover:text-blue-500",children:"Download"})]},t.id))]})]})]}),Ce=({checklist:s})=>{const t=i.useMemo(()=>{if(s.length===0)return 0;const a=s.filter(n=>n.is_done).length;return Math.round(a/s.length*100)},[s]);return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium text-gray-700",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[t,"%"]})]}),e.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${t}%`}})})]}),e.jsxs("ul",{className:"space-y-2",children:[s.length===0&&e.jsx("li",{className:"p-4 text-center text-sm text-gray-500",children:"No checklist items."}),s.map(a=>e.jsxs("li",{className:"flex items-center gap-3 rounded-md bg-gray-50 p-3",children:[e.jsx("input",{type:"checkbox",checked:a.is_done,readOnly:!0,className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:`flex-1 text-sm ${a.is_done?"text-gray-500 line-through":"text-gray-900"}`,children:a.text}),a.is_done&&e.jsxs("span",{className:"text-xs text-gray-400",children:["Done by ",a.done_by]})]},a.id))]})]})},Se=({comments:s})=>e.jsxs("div",{className:"space-y-4",children:[s.length===0&&e.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"No comments yet."}),s.map(t=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx(h,{className:"h-8 w-8 rounded-full bg-gray-200 p-1.5 text-gray-600"}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.author}),e.jsx("span",{className:"text-xs text-gray-500",children:j(t.created_at)})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-700",children:t.body})]})})]},t.id)),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsx(h,{className:"h-8 w-8 rounded-full bg-gray-200 p-1.5 text-gray-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{rows:"3",className:"block w-full rounded-md border-gray-300 shadow-sm sm:text-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Add a comment... (@mention to notify)"}),e.jsx("button",{className:"mt-2 rounded-md border border-transparent bg-blue-600 px-3 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-700",children:"Post Comment"})]})]})]}),Ae=({history:s})=>e.jsx("div",{children:e.jsxs("ul",{className:"space-y-4",children:[s.length===0&&e.jsx("li",{className:"p-4 text-center text-sm text-gray-500",children:"No history recorded."}),s.map(t=>e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gray-200",children:e.jsx(h,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium text-gray-900",children:t.user})," ",t.action.toLowerCase()]}),e.jsx("p",{className:"text-xs text-gray-500",children:S(t.timestamp)})]})]},t.id))]})}),Me=({entry:s,onClose:t})=>{const[a,n]=i.useState("details"),[r,c]=i.useState(null);i.useEffect(()=>{s&&c({...s})},[s]);const u=d=>{const{name:M,value:T,type:P,checked:q}=d.target;c(B=>({...B,[M]:P==="checkbox"?q:T}))};if(!s||!r)return null;const p=[{id:"details",text:"Details",icon:_},{id:"attachments",text:"Attachments",icon:y,count:s.attachments.length},{id:"checklist",text:"Checklist",icon:k,count:s.checklist.length},{id:"comments",text:"Comments",icon:$,count:s.comments.length},{id:"history",text:"History",icon:U,count:s.history.length}],g=()=>{switch(a){case"details":return e.jsx(we,{formData:r,onFormChange:u});case"attachments":return e.jsx(ke,{attachments:r.attachments});case"checklist":return e.jsx(Ce,{checklist:r.checklist});case"comments":return e.jsx(Se,{comments:r.comments});case"history":return e.jsx(Ae,{history:r.history});default:return null}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-0 sm:p-4",onClick:t,children:e.jsxs("div",{className:"relative flex flex-col w-full h-full max-w-5xl sm:max-h-[90vh] bg-white sm:rounded-lg shadow-xl overflow-hidden",onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:s.title})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:e.jsx(N,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"border-b border-gray-200 bg-gray-50",children:e.jsx("nav",{className:"flex -mb-px px-4",children:p.map(d=>e.jsx(_e,{icon:d.icon,text:d.text,active:a===d.id,onClick:()=>n(d.id)},d.id))})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx(g,{})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 bg-gray-50 border-t border-gray-200",children:[e.jsx("button",{onClick:t,className:"rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-semibold text-gray-700 shadow-sm hover:bg-gray-50",children:"Close"}),e.jsx("button",{className:"rounded-md border border-transparent bg-blue-600 px-3 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-700",children:"Save Changes"})]})]})})},Te=({onOpenEntry:s,onOpenSidebar:t})=>e.jsxs("div",{className:"flex h-full flex-col bg-gray-100",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 py-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold leading-6 text-gray-900",children:"Shift Book - Area 1"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Active Entries for Morning Shift, Nov 15, 2025"})]}),e.jsxs("button",{onClick:t,className:"rounded-md p-2 text-gray-500 hover:bg-gray-100 hover:text-gray-700 lg:hidden",children:[e.jsx("span",{className:"sr-only",children:"Open sidebar"}),e.jsx(I,{className:"h-6 w-6"})]})]})})}),e.jsx(je,{}),e.jsx(fe,{entries:de,onOpenEntry:s})]});function De(){const[s,t]=i.useState(null),[a,n]=i.useState(!1),r=i.useCallback(g=>{t(g)},[]),c=i.useCallback(()=>{t(null)},[]),u=i.useCallback(()=>{n(!0)},[]),p=i.useCallback(()=>{n(!1)},[]);return e.jsxs("div",{className:"relative flex h-full w-full overflow-hidden bg-gray-100 font-inter",children:[e.jsxs("style",{children:["@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');",`
          body, .font-inter {
            font-family: 'Inter', sans-serif;
          }
          /* Custom scrollbar for a cleaner look */
          ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
          }
          ::-webkit-scrollbar-track {
            background: #f1f1f1;
          }
          ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
          }
          ::-webkit-scrollbar-thumb:hover {
            background: #a1a1a1;
          }
        `]}),e.jsx(ye,{isOpen:a,onClose:p}),e.jsx("main",{className:"flex-1 overflow-hidden transition-all duration-300 ease-in-out lg:pl-64",children:e.jsx(Te,{onOpenEntry:r,onOpenSidebar:u})}),s&&e.jsx(Me,{entry:s,onClose:c})]})}export{De as default};
