import{c as q,u as W,j as e,r as d,a as _,X as L}from"./index-C0uo4jL5.js";import{a as mt,S as ue,M as pe,B as ut,F as pt,b as fe,c as Y,N as le,g as he}from"./mockData-C0NYPHwj.js";import{L as ht,W as bt,f as gt,a as ft,H as vt,c as H,b as jt,S as kt,C as Nt}from"./helpers-cBzL_66e.js";import{W as wt,a as yt,P as K,M as ve,U as je,S as Ct,L as It,C as St,b as Et}from"./wifi-off-D1FOAdc_.js";import{e as ke,f as ie,c as Z,g as U,i as J,m as Tt,P as I,k as Rt,b as B,j as Dt,h as C,l as _t,F as At,D as Pt,n as Mt,d as Ot,a as Ft,C as Ne,S as $t}from"./Combination-854vLqk_.js";import{C as be}from"./circle-check-Bfke-buQ.js";const Lt=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],oe=q("calendar",Lt);const Bt=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Wt=q("flame",Bt);const Vt=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],we=q("map-pin",Vt);const Gt=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Kt=q("send",Gt);const Ut=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ye=q("tag",Ut),qt=({children:t,isDark:s,onToggleTheme:a,isMobileMenuOpen:r,setIsMobileMenuOpen:l,navItems:i,activeNavId:n,onSelectNav:x,isOnline:m,syncQueue:u,language:p,onToggleLanguage:c})=>{const{t:b}=W();return e.jsxs("div",{className:"flex h-full relative",children:[e.jsxs("aside",{className:"hidden md:flex w-64 flex-col border-r border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 z-20 transition-colors duration-300",children:[e.jsx("div",{className:"h-16 flex items-center px-6 border-b border-slate-100 dark:border-slate-800",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-600 flex items-center justify-center text-white font-bold shadow-indigo-200 dark:shadow-none shadow-lg",children:"B"}),e.jsx("span",{className:"font-bold text-lg tracking-tight text-slate-900 dark:text-white",children:"BLMS"})]})}),e.jsx("nav",{className:"flex-1 py-6 px-3 space-y-1 overflow-y-auto",children:i.map(o=>{const g=n===o.id;return e.jsxs("button",{className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 group ${g?"bg-indigo-50 dark:bg-indigo-500/10 text-indigo-700 dark:text-indigo-300 shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-slate-200"}`,onClick:()=>x(o.id),children:[e.jsx(o.icon,{className:`w-5 h-5 ${g?"text-indigo-600 dark:text-indigo-400":"text-slate-400 dark:text-slate-500 group-hover:text-slate-600 dark:group-hover:text-slate-300"}`}),b(o.labelKey)]},o.id)})}),e.jsx("div",{className:"p-4 border-t border-slate-100 dark:border-slate-800",children:e.jsxs("div",{className:"flex items-center gap-3 px-2 py-2 rounded-xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-700/50",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:"https://placehold.co/100x100/6366F1/FFFFFF?text=JD",alt:"User",className:"w-9 h-9 rounded-full border-2 border-white dark:border-slate-700"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-emerald-500 border-2 border-white dark:border-slate-800 rounded-full"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate",children:"John Doe"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:"Shift Supervisor"})]})]})})]}),e.jsxs("div",{className:"md:hidden fixed top-0 left-0 right-0 h-16 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 z-30 px-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-600 flex items-center justify-center text-white font-bold",children:"B"}),e.jsx("span",{className:"font-bold text-lg text-slate-900 dark:text-white",children:"BLMS"})]}),e.jsx("button",{onClick:()=>l(!r),className:"p-2 text-slate-600 dark:text-slate-400",children:e.jsx(mt,{className:"w-6 h-6"})})]}),r&&e.jsx("div",{className:"md:hidden fixed inset-0 z-40 bg-slate-900/50 backdrop-blur-sm",onClick:()=>l(!1),children:e.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-64 bg-white dark:bg-slate-900 shadow-xl flex flex-col p-4 animate-in slide-in-from-right duration-200",onClick:o=>o.stopPropagation(),children:[e.jsx("div",{className:"flex-1 space-y-2 mt-16",children:i.map(o=>e.jsxs("button",{className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg text-sm font-medium ${n===o.id?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300":"text-slate-600 dark:text-slate-400"}`,onClick:()=>{x(o.id),l(!1)},children:[e.jsx(o.icon,{className:"w-5 h-5"}),b(o.labelKey)]},o.id))}),e.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-800 pt-4 space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:c,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 text-sm bg-white dark:bg-slate-800",children:p.toUpperCase()==="DE"?"DE / EN":"EN / DE"}),e.jsxs("button",{onClick:a,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 text-sm",children:[s?e.jsx(ue,{className:"w-4 h-4"}):e.jsx(pe,{className:"w-4 h-4"}),b("common.theme.toggle")]})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2 text-slate-600 dark:text-slate-400 text-sm",children:[e.jsx(ht,{className:"w-5 h-5"}),"Logout"]})]})]})}),e.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative z-10 md:pt-0 pt-16",children:[e.jsxs("header",{className:"h-16 flex items-center justify-between px-4 md:px-6 border-b border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-slate-900/80 backdrop-blur supports-[backdrop-filter]:bg-white/60",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsxs("div",{className:`hidden md:flex items-center gap-2 px-3 py-1.5 rounded-full border text-xs font-medium ${m?"bg-emerald-50 dark:bg-emerald-500/10 border-emerald-200 dark:border-emerald-500/20 text-emerald-700 dark:text-emerald-400":"bg-amber-50 dark:bg-amber-500/10 border-amber-200 dark:border-amber-500/30 text-amber-700 dark:text-amber-300"}`,children:[m?e.jsx(bt,{className:"w-3.5 h-3.5"}):e.jsx(wt,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:m?b("profile.online"):b("profile.offline",{count:u})})]}),!m&&e.jsxs("span",{className:"text-xs text-amber-600 dark:text-amber-300 hidden md:block",children:[u," queued"]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.jsx("button",{onClick:c,className:"px-3 py-1.5 rounded-full border border-slate-200 dark:border-slate-700 text-xs font-semibold text-slate-700 dark:text-slate-200 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors","aria-label":b("common.language"),children:p.toUpperCase()==="DE"?"DE / EN":"EN / DE"}),e.jsx("button",{onClick:a,className:"p-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors","aria-label":b("common.theme.toggle"),children:s?e.jsx(ue,{className:"w-5 h-5"}):e.jsx(pe,{className:"w-5 h-5"})}),e.jsxs("button",{className:"p-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors relative",children:[e.jsx(ut,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-white dark:border-slate-900"})]})]})]}),t]})]})},zt=({entry:t,onClick:s,users:a,areas:r,density:l})=>{const{t:i}=W(),n=a[t.createdById]||{name:"Unknown",avatar:""},x=r[t.areaId],m=l==="compact"?"p-3":l==="spacious"?"p-5":"p-4",u=l==="compact"?"text-sm":l==="spacious"?"text-lg":"text-base",p=l==="compact"?"text-xs":"text-sm",c=()=>{switch(t.type){case"instruction":return e.jsx(fe,{className:"w-4 h-4 text-emerald-500"});case"suggestion":return e.jsx(ft,{className:"w-4 h-4 text-amber-500"});default:return e.jsx(pt,{className:"w-4 h-4 text-indigo-500"})}},b=()=>{switch(t.priority){case"high":return"bg-red-100 text-red-700 dark:bg-red-500/20 dark:text-red-300 border-red-200 dark:border-red-500/30";case"medium":return"bg-amber-100 text-amber-700 dark:bg-amber-500/20 dark:text-amber-300 border-amber-200 dark:border-amber-500/30";default:return"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400 border-slate-200 dark:border-slate-700"}},o=()=>{const g={open:"bg-blue-50 text-blue-700 dark:bg-blue-500/10 dark:text-blue-400 border-blue-200 dark:border-blue-500/20",in_progress:"bg-purple-50 text-purple-700 dark:bg-purple-500/10 dark:text-purple-400 border-purple-200 dark:border-purple-500/20",completed:"bg-emerald-50 text-emerald-700 dark:bg-emerald-500/10 dark:text-emerald-400 border-emerald-200 dark:border-emerald-500/20",cancelled:"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400 border-slate-200 dark:border-slate-700"};return g[t.status]||g.open};return e.jsx("div",{onClick:s,className:`group relative bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl ${m} hover:shadow-lg hover:border-indigo-300 dark:hover:border-indigo-700 transition-all duration-200 cursor-pointer`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"hidden sm:flex flex-none w-10 h-10 rounded-xl bg-slate-50 dark:bg-slate-800 items-center justify-center border border-slate-100 dark:border-slate-700/50 group-hover:scale-110 transition-transform",children:c()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1.5",children:[e.jsx("div",{className:"flex items-center gap-2 min-w-0",children:e.jsx("h3",{className:`${u} font-semibold text-slate-900 dark:text-white truncate pr-2`,children:t.title})}),e.jsxs("div",{className:"flex items-center gap-2 flex-none",children:[e.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold px-2 py-0.5 rounded-md border ${b()}`,children:i(`entries.${t.priority}`).substring(0,1)}),e.jsx("span",{className:`text-[10px] font-medium px-2.5 py-0.5 rounded-full border ${o()}`,children:i(`entries.${t.status}`)})]})]}),e.jsx("p",{className:`${p} text-slate-500 dark:text-slate-400 line-clamp-2 mb-3 leading-relaxed`,children:t.description}),e.jsxs("div",{className:"flex items-center justify-between border-t border-slate-50 dark:border-slate-800 pt-3 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:n.avatar,alt:n.name,className:"w-5 h-5 rounded-full border border-slate-200 dark:border-slate-700"}),e.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300 truncate max-w-[100px]",children:n.name})]}),e.jsx("div",{className:"w-px h-3 bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-400",children:[e.jsx(yt,{className:"w-3 h-3"}),e.jsx("span",{children:gt(t.createdAt)})]}),x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-px h-3 bg-slate-200 dark:bg-slate-700"}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:x.name})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-slate-400",children:[t.attachments?.length>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(K,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-xs",children:t.attachments.length})]}),t.comments?.length>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ve,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-xs",children:t.comments.length})]})]})]})]})]})})},Ht=({entries:t,onSelectEntry:s,users:a,areas:r,density:l})=>t.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 rounded-2xl border-2 border-dashed border-slate-200 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-2xl",children:"ðŸ”"})}),e.jsx("h3",{className:"text-slate-900 dark:text-white font-medium text-lg",children:"No entries found"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1 max-w-xs",children:"Try adjusting your search terms or filters to find what you're looking for."})]}):e.jsxs("div",{className:"h-full overflow-y-auto space-y-3 pr-1 custom-scrollbar",children:[t.map(i=>e.jsx(zt,{entry:i,onClick:()=>s(i.id),users:a,areas:r,density:l},i.id)),e.jsx("div",{className:"h-4"})]});function Yt(t){const s=Qt(t),a=d.forwardRef((r,l)=>{const{children:i,...n}=r,x=d.Children.toArray(i),m=x.find(Jt);if(m){const u=m.props.children,p=x.map(c=>c===m?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:c);return e.jsx(s,{...n,ref:l,children:d.isValidElement(u)?d.cloneElement(u,void 0,p):null})}return e.jsx(s,{...n,ref:l,children:i})});return a.displayName=`${t}.Slot`,a}function Qt(t){const s=d.forwardRef((a,r)=>{const{children:l,...i}=a;if(d.isValidElement(l)){const n=es(l),x=Xt(i,l.props);return l.type!==d.Fragment&&(x.ref=r?ke(r,n):n),d.cloneElement(l,x)}return d.Children.count(l)>1?d.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var Zt=Symbol("radix.slottable");function Jt(t){return d.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Zt}function Xt(t,s){const a={...s};for(const r in s){const l=t[r],i=s[r];/^on[A-Z]/.test(r)?l&&i?a[r]=(...x)=>{const m=i(...x);return l(...x),m}:l&&(a[r]=l):r==="style"?a[r]={...l,...i}:r==="className"&&(a[r]=[l,i].filter(Boolean).join(" "))}return{...t,...a}}function es(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var X="Dialog",[Ce]=Z(X),[ts,S]=Ce(X),Ie=t=>{const{__scopeDialog:s,children:a,open:r,defaultOpen:l,onOpenChange:i,modal:n=!0}=t,x=d.useRef(null),m=d.useRef(null),[u,p]=ie({prop:r,defaultProp:l??!1,onChange:i,caller:X});return e.jsx(ts,{scope:s,triggerRef:x,contentRef:m,contentId:U(),titleId:U(),descriptionId:U(),open:u,onOpenChange:p,onOpenToggle:d.useCallback(()=>p(c=>!c),[p]),modal:n,children:a})};Ie.displayName=X;var Se="DialogTrigger",ss=d.forwardRef((t,s)=>{const{__scopeDialog:a,...r}=t,l=S(Se,a),i=B(s,l.triggerRef);return e.jsx(I.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":xe(l.open),...r,ref:i,onClick:C(t.onClick,l.onOpenToggle)})});ss.displayName=Se;var de="DialogPortal",[as,Ee]=Ce(de,{forceMount:void 0}),Te=t=>{const{__scopeDialog:s,forceMount:a,children:r,container:l}=t,i=S(de,s);return e.jsx(as,{scope:s,forceMount:a,children:d.Children.map(r,n=>e.jsx(J,{present:a||i.open,children:e.jsx(Tt,{asChild:!0,container:l,children:n})}))})};Te.displayName=de;var Q="DialogOverlay",Re=d.forwardRef((t,s)=>{const a=Ee(Q,t.__scopeDialog),{forceMount:r=a.forceMount,...l}=t,i=S(Q,t.__scopeDialog);return i.modal?e.jsx(J,{present:r||i.open,children:e.jsx(ls,{...l,ref:s})}):null});Re.displayName=Q;var rs=Yt("DialogOverlay.RemoveScroll"),ls=d.forwardRef((t,s)=>{const{__scopeDialog:a,...r}=t,l=S(Q,a);return e.jsx(Rt,{as:rs,allowPinchZoom:!0,shards:[l.contentRef],children:e.jsx(I.div,{"data-state":xe(l.open),...r,ref:s,style:{pointerEvents:"auto",...r.style}})})}),M="DialogContent",De=d.forwardRef((t,s)=>{const a=Ee(M,t.__scopeDialog),{forceMount:r=a.forceMount,...l}=t,i=S(M,t.__scopeDialog);return e.jsx(J,{present:r||i.open,children:i.modal?e.jsx(os,{...l,ref:s}):e.jsx(ns,{...l,ref:s})})});De.displayName=M;var os=d.forwardRef((t,s)=>{const a=S(M,t.__scopeDialog),r=d.useRef(null),l=B(s,a.contentRef,r);return d.useEffect(()=>{const i=r.current;if(i)return Dt(i)},[]),e.jsx(_e,{...t,ref:l,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:C(t.onCloseAutoFocus,i=>{i.preventDefault(),a.triggerRef.current?.focus()}),onPointerDownOutside:C(t.onPointerDownOutside,i=>{const n=i.detail.originalEvent,x=n.button===0&&n.ctrlKey===!0;(n.button===2||x)&&i.preventDefault()}),onFocusOutside:C(t.onFocusOutside,i=>i.preventDefault())})}),ns=d.forwardRef((t,s)=>{const a=S(M,t.__scopeDialog),r=d.useRef(!1),l=d.useRef(!1);return e.jsx(_e,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||a.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,l.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const n=i.target;a.triggerRef.current?.contains(n)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&l.current&&i.preventDefault()}})}),_e=d.forwardRef((t,s)=>{const{__scopeDialog:a,trapFocus:r,onOpenAutoFocus:l,onCloseAutoFocus:i,...n}=t,x=S(M,a),m=d.useRef(null),u=B(s,m);return _t(),e.jsxs(e.Fragment,{children:[e.jsx(At,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:l,onUnmountAutoFocus:i,children:e.jsx(Pt,{role:"dialog",id:x.contentId,"aria-describedby":x.descriptionId,"aria-labelledby":x.titleId,"data-state":xe(x.open),...n,ref:u,onDismiss:()=>x.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(cs,{titleId:x.titleId}),e.jsx(ms,{contentRef:m,descriptionId:x.descriptionId})]})]})}),ce="DialogTitle",Ae=d.forwardRef((t,s)=>{const{__scopeDialog:a,...r}=t,l=S(ce,a);return e.jsx(I.h2,{id:l.titleId,...r,ref:s})});Ae.displayName=ce;var Pe="DialogDescription",is=d.forwardRef((t,s)=>{const{__scopeDialog:a,...r}=t,l=S(Pe,a);return e.jsx(I.p,{id:l.descriptionId,...r,ref:s})});is.displayName=Pe;var Me="DialogClose",ds=d.forwardRef((t,s)=>{const{__scopeDialog:a,...r}=t,l=S(Me,a);return e.jsx(I.button,{type:"button",...r,ref:s,onClick:C(t.onClick,()=>l.onOpenChange(!1))})});ds.displayName=Me;function xe(t){return t?"open":"closed"}var Oe="DialogTitleWarning",[Qs,Fe]=Mt(Oe,{contentName:M,titleName:ce,docsSlug:"dialog"}),cs=({titleId:t})=>{const s=Fe(Oe),a=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return d.useEffect(()=>{t&&(document.getElementById(t)||console.error(a))},[a,t]),null},xs="DialogDescriptionWarning",ms=({contentRef:t,descriptionId:s})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Fe(xs).contentName}}.`;return d.useEffect(()=>{const l=t.current?.getAttribute("aria-describedby");s&&l&&(document.getElementById(s)||console.warn(r))},[r,t,s]),null},$e=Ie,Le=Te,Be=Re,We=De,us=Ae;function ge(t){const s=ps(t),a=d.forwardRef((r,l)=>{const{children:i,...n}=r,x=d.Children.toArray(i),m=x.find(bs);if(m){const u=m.props.children,p=x.map(c=>c===m?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:c);return e.jsx(s,{...n,ref:l,children:d.isValidElement(u)?d.cloneElement(u,void 0,p):null})}return e.jsx(s,{...n,ref:l,children:i})});return a.displayName=`${t}.Slot`,a}function ps(t){const s=d.forwardRef((a,r)=>{const{children:l,...i}=a;if(d.isValidElement(l)){const n=fs(l),x=gs(i,l.props);return l.type!==d.Fragment&&(x.ref=r?ke(r,n):n),d.cloneElement(l,x)}return d.Children.count(l)>1?d.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var hs=Symbol("radix.slottable");function bs(t){return d.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===hs}function gs(t,s){const a={...s};for(const r in s){const l=t[r],i=s[r];/^on[A-Z]/.test(r)?l&&i?a[r]=(...x)=>{const m=i(...x);return l(...x),m}:l&&(a[r]=l):r==="style"?a[r]={...l,...i}:r==="className"&&(a[r]=[l,i].filter(Boolean).join(" "))}return{...t,...a}}function fs(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}function vs(t){const s=t+"CollectionProvider",[a,r]=Z(s),[l,i]=a(s,{collectionRef:{current:null},itemMap:new Map}),n=N=>{const{scope:h,children:w}=N,y=_.useRef(null),v=_.useRef(new Map).current;return e.jsx(l,{scope:h,itemMap:v,collectionRef:y,children:w})};n.displayName=s;const x=t+"CollectionSlot",m=ge(x),u=_.forwardRef((N,h)=>{const{scope:w,children:y}=N,v=i(x,w),j=B(h,v.collectionRef);return e.jsx(m,{ref:j,children:y})});u.displayName=x;const p=t+"CollectionItemSlot",c="data-radix-collection-item",b=ge(p),o=_.forwardRef((N,h)=>{const{scope:w,children:y,...v}=N,j=_.useRef(null),T=B(h,j),R=i(p,w);return _.useEffect(()=>(R.itemMap.set(j,{ref:j,...v}),()=>void R.itemMap.delete(j))),e.jsx(b,{[c]:"",ref:T,children:y})});o.displayName=p;function g(N){const h=i(t+"CollectionConsumer",N);return _.useCallback(()=>{const y=h.collectionRef.current;if(!y)return[];const v=Array.from(y.querySelectorAll(`[${c}]`));return Array.from(h.itemMap.values()).sort((R,A)=>v.indexOf(R.ref.current)-v.indexOf(A.ref.current))},[h.collectionRef,h.itemMap])}return[{Provider:n,Slot:u,ItemSlot:o},g,r]}var js=d.createContext(void 0);function Ve(t){const s=d.useContext(js);return t||s||"ltr"}var re="rovingFocusGroup.onEntryFocus",ks={bubbles:!1,cancelable:!0},z="RovingFocusGroup",[ne,Ge,Ns]=vs(z),[ws,Ke]=Z(z,[Ns]),[ys,Cs]=ws(z),Ue=d.forwardRef((t,s)=>e.jsx(ne.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(ne.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Is,{...t,ref:s})})}));Ue.displayName=z;var Is=d.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:a,orientation:r,loop:l=!1,dir:i,currentTabStopId:n,defaultCurrentTabStopId:x,onCurrentTabStopIdChange:m,onEntryFocus:u,preventScrollOnEntryFocus:p=!1,...c}=t,b=d.useRef(null),o=B(s,b),g=Ve(i),[N,h]=ie({prop:n,defaultProp:x??null,onChange:m,caller:z}),[w,y]=d.useState(!1),v=Ot(u),j=Ge(a),T=d.useRef(!1),[R,A]=d.useState(0);return d.useEffect(()=>{const k=b.current;if(k)return k.addEventListener(re,v),()=>k.removeEventListener(re,v)},[v]),e.jsx(ys,{scope:a,orientation:r,dir:g,loop:l,currentTabStopId:N,onItemFocus:d.useCallback(k=>h(k),[h]),onItemShiftTab:d.useCallback(()=>y(!0),[]),onFocusableItemAdd:d.useCallback(()=>A(k=>k+1),[]),onFocusableItemRemove:d.useCallback(()=>A(k=>k-1),[]),children:e.jsx(I.div,{tabIndex:w||R===0?-1:0,"data-orientation":r,...c,ref:o,style:{outline:"none",...t.style},onMouseDown:C(t.onMouseDown,()=>{T.current=!0}),onFocus:C(t.onFocus,k=>{const te=!T.current;if(k.target===k.currentTarget&&te&&!w){const P=new CustomEvent(re,ks);if(k.currentTarget.dispatchEvent(P),!P.defaultPrevented){const O=j().filter(E=>E.focusable),F=O.find(E=>E.active),$=O.find(E=>E.id===N),ae=[F,$,...O].filter(Boolean).map(E=>E.ref.current);He(ae,p)}}T.current=!1}),onBlur:C(t.onBlur,()=>y(!1))})})}),qe="RovingFocusGroupItem",ze=d.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:a,focusable:r=!0,active:l=!1,tabStopId:i,children:n,...x}=t,m=U(),u=i||m,p=Cs(qe,a),c=p.currentTabStopId===u,b=Ge(a),{onFocusableItemAdd:o,onFocusableItemRemove:g,currentTabStopId:N}=p;return d.useEffect(()=>{if(r)return o(),()=>g()},[r,o,g]),e.jsx(ne.ItemSlot,{scope:a,id:u,focusable:r,active:l,children:e.jsx(I.span,{tabIndex:c?0:-1,"data-orientation":p.orientation,...x,ref:s,onMouseDown:C(t.onMouseDown,h=>{r?p.onItemFocus(u):h.preventDefault()}),onFocus:C(t.onFocus,()=>p.onItemFocus(u)),onKeyDown:C(t.onKeyDown,h=>{if(h.key==="Tab"&&h.shiftKey){p.onItemShiftTab();return}if(h.target!==h.currentTarget)return;const w=Ts(h,p.orientation,p.dir);if(w!==void 0){if(h.metaKey||h.ctrlKey||h.altKey||h.shiftKey)return;h.preventDefault();let v=b().filter(j=>j.focusable).map(j=>j.ref.current);if(w==="last")v.reverse();else if(w==="prev"||w==="next"){w==="prev"&&v.reverse();const j=v.indexOf(h.currentTarget);v=p.loop?Rs(v,j+1):v.slice(j+1)}setTimeout(()=>He(v))}}),children:typeof n=="function"?n({isCurrentTabStop:c,hasTabStop:N!=null}):n})})});ze.displayName=qe;var Ss={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Es(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Ts(t,s,a){const r=Es(t.key,a);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Ss[r]}function He(t,s=!1){const a=document.activeElement;for(const r of t)if(r===a||(r.focus({preventScroll:s}),document.activeElement!==a))return}function Rs(t,s){return t.map((a,r)=>t[(s+r)%t.length])}var Ds=Ue,_s=ze,ee="Tabs",[As]=Z(ee,[Ke]),Ye=Ke(),[Ps,me]=As(ee),Qe=d.forwardRef((t,s)=>{const{__scopeTabs:a,value:r,onValueChange:l,defaultValue:i,orientation:n="horizontal",dir:x,activationMode:m="automatic",...u}=t,p=Ve(x),[c,b]=ie({prop:r,onChange:l,defaultProp:i??"",caller:ee});return e.jsx(Ps,{scope:a,baseId:U(),value:c,onValueChange:b,orientation:n,dir:p,activationMode:m,children:e.jsx(I.div,{dir:p,"data-orientation":n,...u,ref:s})})});Qe.displayName=ee;var Ze="TabsList",Je=d.forwardRef((t,s)=>{const{__scopeTabs:a,loop:r=!0,...l}=t,i=me(Ze,a),n=Ye(a);return e.jsx(Ds,{asChild:!0,...n,orientation:i.orientation,dir:i.dir,loop:r,children:e.jsx(I.div,{role:"tablist","aria-orientation":i.orientation,...l,ref:s})})});Je.displayName=Ze;var Xe="TabsTrigger",et=d.forwardRef((t,s)=>{const{__scopeTabs:a,value:r,disabled:l=!1,...i}=t,n=me(Xe,a),x=Ye(a),m=at(n.baseId,r),u=rt(n.baseId,r),p=r===n.value;return e.jsx(_s,{asChild:!0,...x,focusable:!l,active:p,children:e.jsx(I.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":u,"data-state":p?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:m,...i,ref:s,onMouseDown:C(t.onMouseDown,c=>{!l&&c.button===0&&c.ctrlKey===!1?n.onValueChange(r):c.preventDefault()}),onKeyDown:C(t.onKeyDown,c=>{[" ","Enter"].includes(c.key)&&n.onValueChange(r)}),onFocus:C(t.onFocus,()=>{const c=n.activationMode!=="manual";!p&&!l&&c&&n.onValueChange(r)})})})});et.displayName=Xe;var tt="TabsContent",st=d.forwardRef((t,s)=>{const{__scopeTabs:a,value:r,forceMount:l,children:i,...n}=t,x=me(tt,a),m=at(x.baseId,r),u=rt(x.baseId,r),p=r===x.value,c=d.useRef(p);return d.useEffect(()=>{const b=requestAnimationFrame(()=>c.current=!1);return()=>cancelAnimationFrame(b)},[]),e.jsx(J,{present:l||p,children:({present:b})=>e.jsx(I.div,{"data-state":p?"active":"inactive","data-orientation":x.orientation,role:"tabpanel","aria-labelledby":m,hidden:!b,id:u,tabIndex:0,...n,ref:s,style:{...t.style,animationDuration:c.current?"0s":void 0},children:b&&i})})});st.displayName=tt;function at(t,s){return`${t}-trigger-${s}`}function rt(t,s){return`${t}-content-${s}`}var Ms=Qe,Os=Je,Fs=et,G=st;const $s=({entry:t,isOpen:s,onClose:a,users:r,areas:l,equipmentMap:i})=>{const{t:n}=W(),[x,m]=d.useState("details");if(!t)return null;const u=r&&r[t.createdById]||{name:"Unknown"},p=l&&l[t.areaId]||{name:"Unknown"},c=i&&i[t.equipmentId]||{label:"Unknown",kapNumber:"â€”"},b=o=>r&&r[o]||{name:"Unknown",avatar:""};return e.jsx($e,{open:s,onOpenChange:o=>!o&&a(),children:e.jsxs(Le,{children:[e.jsx(Be,{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 animate-in fade-in duration-200"}),e.jsxs(We,{className:"fixed inset-0 sm:inset-auto sm:left-1/2 sm:top-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 z-50 flex flex-col w-full max-w-full sm:max-w-4xl h-[100dvh] sm:h-[85vh] max-h-[100dvh] sm:max-h-screen gap-0 border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 p-0 shadow-2xl duration-200 animate-in zoom-in-90 sm:rounded-2xl rounded-none",children:[e.jsxs(Ms,{value:x,onValueChange:m,className:"flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"sticky top-0 z-20 px-4 sm:px-6 pt-4 pb-3 sm:pt-5 sm:pb-3 border-b border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 pb-3",children:[e.jsxs("div",{className:"pr-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"text-xs font-bold tracking-wider text-slate-400 uppercase",children:t.id}),e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wide border ${t.status==="open"?"bg-blue-50 text-blue-600 border-blue-100":t.status==="completed"?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-slate-100 text-slate-600 border-slate-200"}`,children:n(`entries.${t.status}`)})]}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white leading-snug",children:t.title})]}),e.jsx("button",{onClick:a,className:"p-2 -mr-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500 transition-colors",children:e.jsx(L,{className:"w-5 h-5"})})]}),e.jsx(Os,{className:"flex gap-3 sm:gap-6 overflow-x-auto no-scrollbar pb-1",children:[{id:"details",label:n("entries.details"),icon:oe},{id:"attachments",label:`${n("entries.attachments")} (${t.attachments?.length||0})`,icon:K},{id:"checklist",label:n("entries.checklist"),icon:be},{id:"comments",label:n("entries.comments"),icon:ve},{id:"history",label:n("entries.history"),icon:vt}].map(o=>e.jsxs(Fs,{value:o.id,title:o.label,className:`group flex items-center justify-center gap-2 py-3 px-2 sm:px-0 sm:py-4 text-sm font-medium border-b-2 transition-all shrink-0 ${x===o.id?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[e.jsx(o.icon,{className:`w-5 h-5 sm:w-4 sm:h-4 ${x===o.id?"text-indigo-500":"text-slate-400 group-hover:text-slate-500"}`}),e.jsx("span",{className:"hidden sm:inline",children:o.label})]},o.id))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 sm:px-6 py-4 sm:py-6 bg-slate-50/50 dark:bg-slate-900/50",children:[e.jsxs(G,{value:"details",className:"space-y-6 outline-none animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700/50",children:[e.jsx("div",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider mb-1",children:n("entries.area")}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-200",children:[e.jsx(we,{className:"w-4 h-4 text-slate-400"}),p.name]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700/50",children:[e.jsx("div",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider mb-1",children:n("entries.equipment")}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-200",children:[e.jsx(ye,{className:"w-4 h-4 text-slate-400"}),c.label," ",e.jsxs("span",{className:"text-slate-400 font-normal",children:["(",c.kapNumber,")"]})]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700/50",children:[e.jsx("div",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider mb-1",children:n("filters.assignedTo")}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-200",children:[e.jsx(je,{className:"w-4 h-4 text-slate-400"}),b(t.assignedToId)?.name||"Unassigned"]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700/50",children:[e.jsx("div",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider mb-1",children:n("entries.dueDate")}),e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-200",children:[e.jsx(oe,{className:"w-4 h-4 text-slate-400"}),t.dueAt?H(t.dueAt):"No due date"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700/50 rounded-xl p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-3",children:n("entries.description")}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed whitespace-pre-line",children:t.description})]}),e.jsx("div",{className:"flex items-center gap-2 text-xs text-slate-400 pt-4 border-t border-slate-200 dark:border-slate-800",children:e.jsx("span",{children:n("entries.createdInfo",{name:u.name,date:H(t.createdAt)})})})]}),e.jsx(G,{value:"attachments",className:"space-y-6 outline-none animate-in fade-in slide-in-from-bottom-2 duration-300",children:t.attachments&&t.attachments.length>0?e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[t.attachments.map(o=>e.jsxs("div",{className:"group relative aspect-square rounded-xl bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 overflow-hidden cursor-pointer hover:ring-2 ring-indigo-500 transition-all",children:[o.type==="image"?e.jsx("img",{src:"https://picsum.photos/400/400",alt:o.filename,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-4 text-center",children:[e.jsx(K,{className:"w-8 h-8 text-slate-400 mb-2"}),e.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-300 break-all line-clamp-2",children:o.filename})]}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 bg-black/60 backdrop-blur-md p-2 translate-y-full group-hover:translate-y-0 transition-transform",children:[e.jsx("p",{className:"text-[10px] text-white truncate",children:o.filename}),e.jsx("p",{className:"text-[9px] text-slate-300",children:jt(o.sizeBytes)})]})]},o.id)),e.jsxs("div",{className:"aspect-square rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-700 flex flex-col items-center justify-center text-slate-400 hover:border-indigo-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-500/10 transition-colors cursor-pointer",children:[e.jsx(K,{className:"w-6 h-6 mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:"Add File"})]})]}):e.jsxs("div",{className:"text-center py-12 text-slate-400",children:[e.jsx(K,{className:"w-12 h-12 mx-auto mb-3 text-slate-300 dark:text-slate-700"}),e.jsx("p",{children:"No attachments yet"})]})}),e.jsx(G,{value:"checklist",className:"space-y-6 outline-none animate-in fade-in slide-in-from-bottom-2 duration-300",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:t.checklist&&t.checklist.length>0?e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:t.checklist.map(o=>e.jsxs("div",{className:"flex items-center gap-3 p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${o.isDone?"bg-emerald-500 border-emerald-500 text-white":"border-slate-300 dark:border-slate-600"}`,children:o.isDone&&e.jsx(be,{className:"w-3.5 h-3.5"})}),e.jsx("span",{className:`text-sm ${o.isDone?"text-slate-400 line-through":"text-slate-700 dark:text-slate-200"}`,children:o.text})]},o.id))}):e.jsx("div",{className:"p-8 text-center text-sm text-slate-500",children:"No checklist items."})})}),e.jsxs(G,{value:"comments",className:"space-y-4 outline-none flex flex-col min-h-[320px] animate-in fade-in slide-in-from-bottom-2 duration-300",children:[e.jsx("div",{className:"flex-1 overflow-y-auto space-y-4 pr-1",children:t.comments&&t.comments.length>0?t.comments.map(o=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("img",{src:b(o.authorId).avatar,className:"w-8 h-8 rounded-full border border-slate-200",alt:""}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-tr-xl rounded-br-xl rounded-bl-xl border border-slate-100 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-slate-900 dark:text-white",children:b(o.authorId).name}),e.jsx("span",{className:"text-[10px] text-slate-400",children:H(o.timestamp)})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:o.body})]})})]},o.id)):e.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"No comments yet. Start the conversation!"})}),e.jsxs("div",{className:"flex gap-2 items-center bg-white dark:bg-slate-800 p-2 rounded-xl border border-slate-200 dark:border-slate-700",children:[e.jsx("input",{type:"text",placeholder:"Write a comment...",className:"flex-1 bg-transparent border-none focus:ring-0 text-sm px-3 py-2 text-slate-900 dark:text-white placeholder:text-slate-400"}),e.jsx("button",{className:"p-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:e.jsx(Kt,{className:"w-4 h-4"})})]})]}),e.jsx(G,{value:"history",className:"outline-none animate-in fade-in slide-in-from-bottom-2 duration-300",children:e.jsx("div",{className:"relative border-l-2 border-slate-200 dark:border-slate-700 ml-3 space-y-6",children:t.history&&t.history.map(o=>e.jsxs("div",{className:"relative pl-6",children:[e.jsx("div",{className:"absolute -left-[9px] top-1.5 w-4 h-4 rounded-full bg-white dark:bg-slate-900 border-2 border-slate-300 dark:border-slate-600"}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-0.5",children:H(o.timestamp)}),e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:o.action}),e.jsxs("div",{className:"text-xs text-slate-500",children:["by ",b(o.userId).name]})]},o.id))})})]})]}),e.jsxs("div",{className:"flex-none p-3 sm:p-4 border-t border-slate-100 dark:border-slate-800 bg-white/95 dark:bg-slate-900/95 backdrop-blur flex justify-end gap-2",children:[e.jsx("button",{onClick:a,className:"px-3 py-2 rounded-md text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:n("common.close")}),e.jsx("button",{className:"px-3 py-2 rounded-md text-sm font-medium bg-indigo-600 text-white hover:bg-indigo-700 shadow-sm shadow-indigo-200 dark:shadow-none transition-all",children:n("common.edit")})]})]})]})})},Ls=["open","in_progress","completed"],Bs=["high","medium","normal"],Ws=["record","instruction","suggestion"],Vs=({searchQuery:t,setSearchQuery:s,activeFilters:a,setActiveFilters:r,density:l,onToggleDensity:i,areas:n,users:x})=>{const{t:m}=W(),[u,p]=_.useState(!1),c=(o,g)=>{if(a[o]===g){const N={...a};delete N[o],r(N)}else r({...a,[o]:g})},b=()=>r({});return e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ct,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:m("header.searchPlaceholder")||"Search entries...",value:t,onChange:o=>s(o.target.value),className:"w-full pl-10 pr-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm text-slate-900 dark:text-white placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-shadow"})]}),e.jsx("button",{onClick:()=>p(!u),className:`lg:hidden flex items-center justify-center w-10 h-10 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${u?"ring-2 ring-indigo-500/40":""}`,children:e.jsx(Y,{className:"w-5 h-5"})}),e.jsxs("div",{className:"hidden lg:flex items-center gap-2",children:[Ls.map(o=>e.jsxs("button",{onClick:()=>c("status",o),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg border text-xs font-medium whitespace-nowrap transition-all ${a.status===o?"bg-indigo-600 border-indigo-600 text-white shadow-md shadow-indigo-200 dark:shadow-none":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:border-indigo-300 dark:hover:border-indigo-700"}`,children:[m(`entries.${o}`),a.status===o&&e.jsx(L,{className:"w-3 h-3"})]},o)),Bs.map(o=>e.jsxs("button",{onClick:()=>c("priority",o),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg border text-xs font-medium whitespace-nowrap transition-all ${a.priority===o?"bg-amber-600 border-amber-600 text-white shadow-md shadow-amber-200 dark:shadow-none":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:border-amber-300 dark:hover:border-amber-700"}`,children:[m(`entries.${o}`),a.priority===o&&e.jsx(L,{className:"w-3 h-3"})]},o)),Ws.map(o=>e.jsxs("button",{onClick:()=>c("type",o),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg border text-xs font-medium whitespace-nowrap transition-all ${a.type===o?"bg-emerald-600 border-emerald-600 text-white shadow-md shadow-emerald-200 dark:shadow-none":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:border-emerald-300 dark:hover:border-emerald-700"}`,children:[m(`entries.${o}`),a.type===o&&e.jsx(L,{className:"w-3 h-3"})]},o)),e.jsxs("button",{onClick:()=>c("hasAttachments",!0),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg border text-xs font-medium whitespace-nowrap transition-all ${a.hasAttachments?"bg-indigo-600 border-indigo-600 text-white shadow-md shadow-indigo-200 dark:shadow-none":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:border-indigo-300 dark:hover:border-indigo-700"}`,children:[m("filters.hasAttachments"),a.hasAttachments&&e.jsx(L,{className:"w-3 h-3"})]}),e.jsx("div",{className:"w-px h-6 bg-slate-200 dark:bg-slate-700 mx-1"}),e.jsxs("button",{onClick:()=>p(!u),className:`flex items-center gap-1.5 px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-xs font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors ${u?"ring-2 ring-indigo-500/40":""}`,children:[e.jsx(Y,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:m("filters.title")}),e.jsx(Ft,{className:`w-3 h-3 transition-transform ${u?"rotate-180":""}`})]}),e.jsxs("button",{onClick:i,className:"flex items-center gap-1.5 px-3 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-xs font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[m("common.density"),": ",m(`density.${l}`)]})]})]}),u&&e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl p-4 bg-white dark:bg-slate-800 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:m("filters.activeFilters")}),e.jsx("button",{onClick:b,className:"text-xs text-indigo-600 dark:text-indigo-300 hover:underline",children:m("filters.clearAll")})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 space-y-1",children:[e.jsx("span",{children:m("filters.area")}),e.jsxs("select",{className:"w-full px-3 py-2 rounded-lg bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-sm",value:a.area||"",onChange:o=>r({...a,area:o.target.value||void 0}),children:[e.jsx("option",{value:"",children:"â€”"}),Object.entries(n).map(([o,g])=>e.jsx("option",{value:o,children:g.name},o))]})]}),e.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 space-y-1",children:[e.jsx("span",{children:m("filters.assignedTo")}),e.jsxs("select",{className:"w-full px-3 py-2 rounded-lg bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-sm",value:a.assignedTo||"",onChange:o=>r({...a,assignedTo:o.target.value||void 0}),children:[e.jsx("option",{value:"",children:"â€”"}),Object.entries(x).map(([o,g])=>e.jsx("option",{value:o,children:g.name},o))]})]}),e.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 space-y-1",children:[e.jsx("span",{children:m("filters.createdBy")}),e.jsxs("select",{className:"w-full px-3 py-2 rounded-lg bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-sm",value:a.createdBy||"",onChange:o=>r({...a,createdBy:o.target.value||void 0}),children:[e.jsx("option",{value:"",children:"â€”"}),Object.entries(x).map(([o,g])=>e.jsx("option",{value:o,children:g.name},o))]})]})]})]})]})},Gs=({isOpen:t,onClose:s,onSubmit:a,users:r,areas:l,equipment:i})=>{const{t:n}=W(),[x,m]=d.useState(le);d.useEffect(()=>{m({...le,title:"",description:""})},[t]);const u=(c,b)=>m(o=>({...o,[c]:b})),p=c=>{c.preventDefault(),a(x),s()};return e.jsx($e,{open:t,onOpenChange:c=>!c&&s(),children:e.jsxs(Le,{children:[e.jsx(Be,{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 animate-in fade-in"}),e.jsxs(We,{className:"fixed inset-0 sm:inset-auto sm:left-1/2 sm:top-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 w-full sm:max-w-3xl h-full sm:h-[85vh] max-h-screen bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 shadow-2xl sm:rounded-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:n("entries.new")}),e.jsx(us,{className:"text-lg font-semibold text-slate-900 dark:text-white",children:n("entries.title")})]}),e.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500",children:e.jsx(L,{className:"w-5 h-5"})})]}),e.jsxs("form",{id:"create-entry",onSubmit:p,className:"flex-1 overflow-y-auto p-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 space-y-1",children:[e.jsx("span",{children:n("entries.title")}),e.jsx("input",{required:!0,value:x.title,onChange:c=>u("title",c.target.value),className:"w-full px-3 py-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm",placeholder:n("entries.whatHappening")||"Title"})]}),e.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 space-y-1",children:[e.jsx("span",{children:n("entries.type")}),e.jsx("select",{value:x.type,onChange:c=>u("type",c.target.value),className:"w-full px-3 py-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm",children:["record","instruction","suggestion"].map(c=>e.jsx("option",{value:c,children:n(`entries.${c}`)},c))})]}),e.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 space-y-1",children:[e.jsx("span",{children:n("entries.status")}),e.jsx("select",{value:x.status,onChange:c=>u("status",c.target.value),className:"w-full px-3 py-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm",children:["open","in_progress","completed","cancelled"].map(c=>e.jsx("option",{value:c,children:n(`entries.${c}`)},c))})]}),e.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 space-y-1",children:[e.jsx("span",{children:n("entries.priority")}),e.jsx("select",{value:x.priority,onChange:c=>u("priority",c.target.value),className:"w-full px-3 py-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm",children:["high","medium","normal","low"].map(c=>e.jsx("option",{value:c,children:n(`entries.${c}`)},c))})]}),e.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 space-y-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(we,{className:"w-3 h-3"}),n("entries.area")]}),e.jsx("select",{value:x.areaId,onChange:c=>u("areaId",c.target.value),className:"w-full px-3 py-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm",children:Object.entries(l).map(([c,b])=>e.jsx("option",{value:c,children:b.name},c))})]}),e.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 space-y-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ye,{className:"w-3 h-3"}),n("entries.equipment")]}),e.jsxs("select",{value:x.equipmentId,onChange:c=>u("equipmentId",c.target.value),className:"w-full px-3 py-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm",children:[e.jsx("option",{value:"",children:"â€”"}),Object.entries(i).map(([c,b])=>e.jsx("option",{value:c,children:`${b.label} (${b.kapNumber})`},c))]})]}),e.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 space-y-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(je,{className:"w-3 h-3"}),n("entries.assignedTo")]}),e.jsxs("select",{value:x.assignedToId||"",onChange:c=>u("assignedToId",c.target.value),className:"w-full px-3 py-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm",children:[e.jsx("option",{value:"",children:"â€”"}),Object.entries(r).map(([c,b])=>e.jsx("option",{value:c,children:b.name},c))]})]}),e.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 space-y-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(oe,{className:"w-3 h-3"}),n("entries.dueDate")]}),e.jsx("input",{type:"datetime-local",value:x.dueAt||"",onChange:c=>u("dueAt",c.target.value),className:"w-full px-3 py-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm"})]})]}),e.jsxs("label",{className:"text-xs text-slate-500 dark:text-slate-400 space-y-1 block",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ne,{className:"w-3 h-3"}),n("entries.description")]}),e.jsx("textarea",{required:!0,value:x.description,onChange:c=>u("description",c.target.value),rows:4,className:"w-full px-3 py-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm",placeholder:n("entries.details")||"Details"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx(Wt,{className:"w-4 h-4 text-amber-500"}),e.jsxs("span",{children:[n("sidebar.shiftView")," Â· Offline capture, attachments, and checklist are stubbed in this prototype."]})]})]}),e.jsxs("div",{className:"flex-none px-5 py-4 border-t border-slate-100 dark:border-slate-800 flex justify-end gap-3 bg-white/90 dark:bg-slate-900/90",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 rounded-lg text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors",children:n("common.cancel")}),e.jsx("button",{form:"create-entry",type:"submit",className:"px-4 py-2 rounded-lg text-sm font-medium bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none transition-all",children:n("common.create")})]})]})]})})};function Zs(){const{t,i18n:s}=W(),[a,r]=d.useState(()=>(localStorage.getItem("v8-theme")||"light")==="dark"),[l,i]=d.useState("shift-book"),[n,x]=d.useState(!0),[m,u]=d.useState(0),[p,c]=d.useState("comfortable"),b=()=>{const f=s.language==="en"?"de":"en";s.changeLanguage(f)},o=()=>{r(f=>{const D=!f;return localStorage.setItem("v8-theme",D?"dark":"light"),D})},[g,N]=d.useState(""),[h,w]=d.useState({}),[y,v]=d.useState(null),[j,T]=d.useState(!1),[R,A]=d.useState(!1);d.useEffect(()=>{const f=document.documentElement;a?f.classList.add("dark"):f.classList.remove("dark")},[a]);const k=he(s.language),te=d.useMemo(()=>[{id:"shift-book",icon:fe,labelKey:"modules.shiftBook"},{id:"platform",icon:It,labelKey:"modules.platformServices"},{id:"parameter-master",icon:kt,labelKey:"modules.parameterMaster"},{id:"manual-entry",icon:Ne,labelKey:"modules.manualEntry"},{id:"filter-studio",icon:Y,labelKey:"modules.filterStudio"},{id:"dashboards",icon:St,labelKey:"modules.dashboards"},{id:"reporting",icon:Y,labelKey:"modules.reporting"},{id:"campaigns",icon:Nt,labelKey:"modules.campaigns"},{id:"admin",icon:$t,labelKey:"modules.administration"}],[]),[P,O]=d.useState(k.entries),F=k.users,$=k.areas,se=k.equipment;d.useEffect(()=>{O(he(s.language).entries)},[s.language]);const ae=d.useMemo(()=>P.filter(f=>{const D=!g||f.title.toLowerCase().includes(g.toLowerCase())||f.description.toLowerCase().includes(g.toLowerCase()),V=!h.status||h.status===f.status,ot=!h.priority||h.priority===f.priority,nt=!h.type||h.type===f.type,it=!h.area||f.areaId===h.area,dt=!h.assignedTo||f.assignedToId===h.assignedTo,ct=!h.createdBy||f.createdById===h.createdBy,xt=!h.hasAttachments||(f.attachments?.length??0)>0;return D&&V&&ot&&nt&&it&&dt&&ct&&xt}),[g,h,P]),E=d.useMemo(()=>P.find(f=>f.id===y),[y,P]),lt=f=>{const D={...le,...f,id:`SB-${Math.floor(Math.random()*9e3)+1e3}`,createdAt:new Date().toISOString()};O(V=>[D,...V]),n||u(V=>V+1)};return e.jsxs("div",{className:`${a?"dark":""} h-screen w-full flex flex-col overflow-hidden bg-slate-50 dark:bg-slate-900 transition-colors duration-300`,children:[e.jsx(qt,{isDark:a,onToggleTheme:o,isMobileMenuOpen:j,setIsMobileMenuOpen:T,navItems:te,activeNavId:l,onSelectNav:i,isOnline:n,syncQueue:m,language:s.language,onToggleLanguage:b,children:e.jsxs("div",{className:"flex flex-col h-full max-w-7xl mx-auto w-full",children:[e.jsxs("div",{className:"flex-none px-4 py-4 md:px-6 space-y-4",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:t("header.title")})})}),e.jsx(Vs,{searchQuery:g,setSearchQuery:N,activeFilters:h,setActiveFilters:w,density:p,onToggleDensity:()=>{const f=["compact","comfortable","spacious"],D=f.indexOf(p);c(f[(D+1)%f.length])},areas:$,users:F})]}),e.jsx("div",{className:"flex-1 min-h-0 px-4 md:px-6 pb-4",children:l==="shift-book"?e.jsx(Ht,{entries:ae,onSelectEntry:v,users:F,areas:$,density:p}):e.jsx("div",{className:"h-full flex items-center justify-center text-center border border-dashed border-slate-300 dark:border-slate-800 rounded-2xl p-8",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2",children:t("common.comingSoon")}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 max-w-md",children:t("common.notImplemented")})]})})})]})}),l==="shift-book"&&e.jsxs("button",{onClick:()=>A(!0),className:"fixed bottom-6 right-6 md:bottom-8 md:right-8 flex items-center gap-2 px-4 py-3 rounded-full bg-indigo-600 text-white shadow-lg hover:bg-indigo-700 transition-all z-30",children:[e.jsx(Et,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:t("entries.newButton")})]}),e.jsx($s,{entry:E,isOpen:!!y,onClose:()=>v(null),users:F,areas:$,equipmentMap:se}),e.jsx(Gs,{isOpen:R,onClose:()=>A(!1),onSubmit:f=>lt(f),users:F,areas:$,equipment:se})]})}export{Zs as default};
